// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.kpdus.com/jad.html
// Decompiler options: packimports(3) fieldsfirst nonlb space 

package com.tencent.bugly.beta.global;

import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.SharedPreferences;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.os.Handler;
import android.text.TextUtils;
import android.widget.Toast;
import com.tencent.bugly.beta.Beta;
import com.tencent.bugly.beta.UpgradeInfo;
import com.tencent.bugly.beta.download.BetaReceiver;
import com.tencent.bugly.beta.download.DownloadListener;
import com.tencent.bugly.beta.download.DownloadTask;
import com.tencent.bugly.beta.download.b;
import com.tencent.bugly.beta.ui.BetaActivity;
import com.tencent.bugly.beta.ui.f;
import com.tencent.bugly.beta.ui.g;
import com.tencent.bugly.beta.upgrade.BetaGrayStrategy;
import com.tencent.bugly.beta.upgrade.BetaUploadStrategy;
import com.tencent.bugly.beta.upgrade.UpgradeListener;
import com.tencent.bugly.beta.upgrade.UpgradeStateListener;
import com.tencent.bugly.proguard.a;
import com.tencent.bugly.proguard.ag;
import com.tencent.bugly.proguard.az;
import com.tencent.bugly.proguard.l;
import com.tencent.bugly.proguard.o;
import com.tencent.bugly.proguard.p;
import com.tencent.bugly.proguard.q;
import com.tencent.bugly.proguard.r;
import com.tencent.bugly.proguard.s;
import java.io.File;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

// Referenced classes of package com.tencent.bugly.beta.global:
//            d, e

public final class c
    implements Runnable {

    public final Object a[];
    private int b;

    public transient c(int i, Object aobj[]) {
        b = i;
        a = aobj;
    }

    public final void run() {
        int i = b;
        i;
        JVM INSTR tableswitch 1 19: default 96
    //                   1 97
    //                   2 663
    //                   3 690
    //                   4 878
    //                   5 1031
    //                   6 1067
    //                   7 1120
    //                   8 1135
    //                   9 1206
    //                   10 1277
    //                   11 1369
    //                   12 1458
    //                   13 1675
    //                   14 2042
    //                   15 1574
    //                   16 2219
    //                   17 2320
    //                   18 2500
    //                   19 2615;
           goto _L1 _L2 _L3 _L4 _L5 _L6 _L7 _L8 _L9 _L10 _L11 _L12 _L13 _L14 _L15 _L16 _L17 _L18 _L19 _L20
_L1:
        return;
_L2:
        Object obj;
        ag.a("Beta async init start...", new Object[0]);
        obj = d.D;
        if (TextUtils.isEmpty(((d) (obj)).u)) {
            File file = JVM INSTR new #48  <Class File>;
            file.File(((d) (obj)).y.applicationInfo.publicSourceDir);
            obj.u = com.tencent.bugly.proguard.a.b(file, "MD5");
        }
_L32:
        Object obj2;
        if (TextUtils.isEmpty(((d) (obj)).u)) {
            obj.u = "null";
            ag.e("\u65E0\u6CD5\u83B7\u53D6md5\u503C", new Object[0]);
        }
        if (((d) (obj)).B)
            com.tencent.bugly.proguard.a.a(((d) (obj)).s);
        obj2 = (BetaGrayStrategy)com.tencent.bugly.proguard.a.a("st.bch", BetaGrayStrategy.CREATOR);
        if (obj2 == null) goto _L22; else goto _L21
_L21:
        if (((BetaGrayStrategy) (obj2)).a == null) goto _L22; else goto _L23
_L23:
        if (!TextUtils.equals(((BetaGrayStrategy) (obj2)).a.e.c.toUpperCase(), ((d) (obj)).u)) goto _L25; else goto _L24
_L24:
        String s1;
        if (!com.tencent.bugly.proguard.a.b("st.bch"))
            break MISSING_BLOCK_LABEL_649;
        s1 = ((d) (obj)).z.getString("installApkMd5", null);
        if (TextUtils.isEmpty(s1) || !TextUtils.equals(s1, ((d) (obj)).u)) goto _L27; else goto _L26
_L26:
        l l1 = l.a;
        q q5 = JVM INSTR new #147 <Class q>;
        q5.q("active", System.currentTimeMillis(), (byte)0, 0L, null, ((BetaGrayStrategy) (obj2)).a.k, ((BetaGrayStrategy) (obj2)).a.n, null);
        l1.a(q5);
_L33:
        ((d) (obj)).z.edit().remove("installApkMd5").apply();
        ((d) (obj)).o.a(((BetaGrayStrategy) (obj2)).a.f.b, ((d) (obj)).s.getAbsolutePath(), null, null).delete(true);
        com.tencent.bugly.proguard.a.a(((d) (obj)).s);
        e e1 = com.tencent.bugly.beta.global.e.a;
        com.tencent.bugly.beta.global.e.a();
        ag.a("upgrade success", new Object[0]);
_L25:
        ag.a("[this md5:%s] [strategy md5:%s]", new Object[] {
            ((d) (obj)).u, ((BetaGrayStrategy) (obj2)).a.e.c
        });
_L22:
        obj2 = ((d) (obj)).r;
        BetaReceiver betareceiver = JVM INSTR new #223 <Class BetaReceiver>;
        betareceiver.BetaReceiver();
        IntentFilter intentfilter = JVM INSTR new #226 <Class IntentFilter>;
        intentfilter.IntentFilter("android.net.conn.CONNECTIVITY_CHANGE");
        ((Context) (obj2)).registerReceiver(betareceiver, intentfilter);
        if (((d) (obj)).d)
            Beta.checkUpgrade(false, false);
        if (!d.D.E.a.b) goto _L29; else goto _L28
_L28:
        obj = (ArrayList)l.a.a();
        if (obj == null) goto _L29; else goto _L30
_L30:
        if (!((ArrayList) (obj)).isEmpty()) {
            obj2 = com.tencent.bugly.beta.upgrade.b.a;
            r r1 = JVM INSTR new #272 <Class r>;
            r1.r(((ArrayList) (obj)));
            ((com.tencent.bugly.beta.upgrade.b) (obj2)).a(r1, true);
        }
_L29:
        ag.a("Beta async init end...", new Object[0]);
          goto _L1
        obj;
        if (ag.b(((Throwable) (obj)))) goto _L1; else goto _L31
_L31:
        ((Exception) (obj)).printStackTrace();
          goto _L1
        Object obj3;
        obj3;
        obj.u = null;
          goto _L32
_L27:
        ag.a("activated from the other way", new Object[0]);
          goto _L33
        ag.d("delete strategy failed", new Object[0]);
          goto _L25
_L3:
        try {
            f.a((com.tencent.bugly.beta.ui.b)a[0], ((Boolean)a[1]).booleanValue());
        }
        // Misplaced declaration of an exception variable
        catch (Object obj) {
            if (!ag.b(((Throwable) (obj))))
                ((Exception) (obj)).printStackTrace();
        }
          goto _L1
_L4:
label0:
        {
            obj = (BetaGrayStrategy)a[0];
            obj3 = (DownloadTask)a[1];
            if (!((BetaGrayStrategy) (obj)).d) {
                obj.d = true;
                obj.c = System.currentTimeMillis();
                com.tencent.bugly.proguard.a.a("st.bch", ((android.os.Parcelable) (obj)));
            }
            if (((DownloadTask) (obj3)).getStatus() != 2) {
                if (((DownloadTask) (obj3)).getStatus() != 1)
                    break label0;
                obj3 = l.a;
                q q1 = JVM INSTR new #147 <Class q>;
                q1.q("pop", System.currentTimeMillis(), (byte)4, 0L, ((BetaGrayStrategy) (obj)).a.e, ((BetaGrayStrategy) (obj)).a.k, ((BetaGrayStrategy) (obj)).a.n, null);
                ((l) (obj3)).a(q1);
            }
        }
          goto _L1
        obj3 = l.a;
        q q2 = JVM INSTR new #147 <Class q>;
        q2.q("pop", System.currentTimeMillis(), (byte)3, 0L, ((BetaGrayStrategy) (obj)).a.e, ((BetaGrayStrategy) (obj)).a.k, ((BetaGrayStrategy) (obj)).a.n, null);
        ((l) (obj3)).a(q2);
          goto _L1
_L5:
        boolean flag;
        obj = (BetaGrayStrategy)a[0];
        obj3 = (DownloadTask)a[1];
        flag = ((Boolean)a[2]).booleanValue();
        if (((DownloadTask) (obj3)).getStatus() == 2) goto _L1; else goto _L34
_L34:
        obj.d = false;
        obj.c = System.currentTimeMillis();
        if (flag)
            break MISSING_BLOCK_LABEL_964;
        if (((BetaGrayStrategy) (obj)).a.g != 2)
            obj.b = ((BetaGrayStrategy) (obj)).b + 1;
        com.tencent.bugly.proguard.a.a("st.bch", ((android.os.Parcelable) (obj)));
        l l2 = l.a;
        obj3 = JVM INSTR new #147 <Class q>;
        ((q) (obj3)).q("pop", System.currentTimeMillis(), (byte)2, 0L, ((BetaGrayStrategy) (obj)).a.e, ((BetaGrayStrategy) (obj)).a.k, ((BetaGrayStrategy) (obj)).a.n, null);
        l2.a(((q) (obj3)));
          goto _L1
_L6:
        Toast.makeText(d.D.r, (String)a[0], ((Integer)a[1]).intValue()).show();
          goto _L1
_L7:
        this;
        JVM INSTR monitorenter ;
        if (!((Boolean)a[0]).booleanValue()) {
            a[0] = Boolean.valueOf(true);
            ((Runnable)a[1]).run();
        }
        this;
        JVM INSTR monitorexit ;
          goto _L1
        Object obj1;
        obj1;
        this;
        JVM INSTR monitorexit ;
        throw obj1;
_L8:
        ((g)a[0]).c();
          goto _L1
_L9:
        obj1 = (List)a[0];
        if (obj1 == null) goto _L1; else goto _L35
_L35:
        obj1 = ((List) (obj1)).iterator();
_L38:
        if (!((Iterator) (obj1)).hasNext()) goto _L1; else goto _L36
_L36:
        obj3 = (DownloadListener)((Iterator) (obj1)).next();
        if (obj3 == null) goto _L38; else goto _L37
_L37:
        ((DownloadListener) (obj3)).onCompleted((DownloadTask)a[1]);
          goto _L38
_L10:
        obj1 = (List)a[0];
        if (obj1 == null) goto _L1; else goto _L39
_L39:
        obj3 = ((List) (obj1)).iterator();
_L42:
        if (!((Iterator) (obj3)).hasNext()) goto _L1; else goto _L40
_L40:
        obj1 = (DownloadListener)((Iterator) (obj3)).next();
        if (obj1 == null) goto _L42; else goto _L41
_L41:
        ((DownloadListener) (obj1)).onReceive((DownloadTask)a[1]);
          goto _L42
_L11:
        obj1 = (List)a[0];
        if (obj1 == null) goto _L1; else goto _L43
_L43:
        obj3 = ((List) (obj1)).iterator();
_L46:
        if (!((Iterator) (obj3)).hasNext()) goto _L1; else goto _L44
_L44:
        obj1 = (DownloadListener)((Iterator) (obj3)).next();
        if (obj1 == null) goto _L46; else goto _L45
_L45:
        ((DownloadListener) (obj1)).onFailed((DownloadTask)a[1], ((Integer)a[2]).intValue(), (String)a[3]);
          goto _L46
_L12:
        f.a((com.tencent.bugly.beta.ui.b)a[0], ((Boolean)a[1]).booleanValue(), ((Boolean)a[2]).booleanValue(), ((Long)a[3]).longValue());
        obj1 = JVM INSTR new #383 <Class StringBuilder>;
        ((StringBuilder) (obj1)).StringBuilder("BetaAct TYPE_actCanShow checking : ");
        ag.a(((StringBuilder) (obj1)).append(a[0].hashCode()).toString(), new Object[0]);
          goto _L1
_L13:
        flag = ((Boolean)a[0]).booleanValue();
        obj3 = (com.tencent.bugly.beta.upgrade.a)a[1];
        obj1 = a[1];
        obj1;
        JVM INSTR monitorenter ;
        if (flag)
            break MISSING_BLOCK_LABEL_1560;
        if (!((com.tencent.bugly.beta.upgrade.a) (obj3)).c) {
            a[0] = Boolean.valueOf(true);
            ((com.tencent.bugly.beta.upgrade.a) (obj3)).a(((com.tencent.bugly.beta.upgrade.a) (obj3)).a, null, 0L, 0L, false, "request is not finished");
            ((com.tencent.bugly.beta.upgrade.a) (obj3)).b[1] = Boolean.valueOf(true);
            obj3.c = false;
            ag.a("request is not finished", new Object[0]);
        }
        obj1;
        JVM INSTR monitorexit ;
          goto _L1
        obj3;
        obj1;
        JVM INSTR monitorexit ;
        throw obj3;
_L16:
        if (!((com.tencent.bugly.beta.ui.b)a[0]).b() && !TextUtils.equals(f.a(), com/tencent/bugly/beta/ui/BetaActivity.getCanonicalName())) goto _L48; else goto _L47
_L47:
        ((Handler)a[4]).postDelayed(this, 3000L);
          goto _L1
_L48:
        f.a((com.tencent.bugly.beta.ui.b)a[0], ((Boolean)a[1]).booleanValue(), ((Boolean)a[2]).booleanValue(), ((Long)a[3]).longValue());
          goto _L1
_L14:
        obj3 = (DownloadTask)a[0];
        obj1 = (BetaGrayStrategy)a[1];
        if (obj3 != null && obj1 != null)
            break MISSING_BLOCK_LABEL_1721;
        ag.a("strategyTask or betaStrategy is null", new Object[0]);
          goto _L1
        ((DownloadTask) (obj3)).getStatus();
        JVM INSTR tableswitch 0 5: default 1764
    //                   0 1767
    //                   1 1767
    //                   2 2034
    //                   3 1767
    //                   4 1767
    //                   5 1767;
           goto _L1 _L49 _L49 _L50 _L49 _L49 _L49
_L49:
        if (!((BetaGrayStrategy) (obj1)).d) {
            obj1.d = true;
            obj1.c = System.currentTimeMillis();
            com.tencent.bugly.proguard.a.a("st.bch", ((android.os.Parcelable) (obj1)));
        }
        if (((DownloadTask) (obj3)).getStatus() == 2) goto _L52; else goto _L51
_L51:
        if (((DownloadTask) (obj3)).getStatus() != 1) goto _L54; else goto _L53
_L53:
        l l5 = l.a;
        q q3 = JVM INSTR new #147 <Class q>;
        q3.q("pop", System.currentTimeMillis(), (byte)4, 0L, ((BetaGrayStrategy) (obj1)).a.e, ((BetaGrayStrategy) (obj1)).a.k, ((BetaGrayStrategy) (obj1)).a.n, null);
        l5.a(q3);
_L52:
        if (((DownloadTask) (obj3)).getStatus() != 1 || !com.tencent.bugly.proguard.a.a(d.D.r, ((DownloadTask) (obj3)).getSaveFile(), ((BetaGrayStrategy) (obj1)).a.f.a)) goto _L56; else goto _L55
_L55:
        l l3 = l.a;
        obj3 = JVM INSTR new #147 <Class q>;
        ((q) (obj3)).q("install", System.currentTimeMillis(), (byte)0, 0L, ((BetaGrayStrategy) (obj1)).a.e, ((BetaGrayStrategy) (obj1)).a.k, ((BetaGrayStrategy) (obj1)).a.n, null);
        l3.a(((q) (obj3)));
          goto _L1
_L54:
        l l6 = l.a;
        q q4 = JVM INSTR new #147 <Class q>;
        q4.q("pop", System.currentTimeMillis(), (byte)3, 0L, ((BetaGrayStrategy) (obj1)).a.e, ((BetaGrayStrategy) (obj1)).a.k, ((BetaGrayStrategy) (obj1)).a.n, null);
        l6.a(q4);
          goto _L52
_L56:
        ((DownloadTask) (obj3)).download();
          goto _L1
_L50:
        ((DownloadTask) (obj3)).stop();
          goto _L1
_L15:
        obj3 = (DownloadTask)a[0];
        obj1 = (BetaGrayStrategy)a[1];
        flag = ((Boolean)a[2]).booleanValue();
        if (obj3 != null && obj1 != null) goto _L58; else goto _L57
_L57:
        ag.a("strategyTask or betaStrategy is null", new Object[0]);
          goto _L1
_L58:
        if (((DownloadTask) (obj3)).getStatus() == 2) goto _L1; else goto _L59
_L59:
        obj1.d = false;
        obj1.c = System.currentTimeMillis();
        if (flag) goto _L61; else goto _L60
_L60:
        if (((BetaGrayStrategy) (obj1)).a.g != 2)
            obj1.b = ((BetaGrayStrategy) (obj1)).b + 1;
_L61:
        com.tencent.bugly.proguard.a.a("st.bch", ((android.os.Parcelable) (obj1)));
        l l4 = l.a;
        obj3 = JVM INSTR new #147 <Class q>;
        ((q) (obj3)).q("pop", System.currentTimeMillis(), (byte)2, 0L, ((BetaGrayStrategy) (obj1)).a.e, ((BetaGrayStrategy) (obj1)).a.k, ((BetaGrayStrategy) (obj1)).a.n, null);
        l4.a(((q) (obj3)));
          goto _L1
_L17:
        boolean flag1;
        obj3 = (UpgradeListener)a[0];
        i = ((Integer)a[1]).intValue();
        obj1 = (BetaGrayStrategy)a[2];
        flag1 = ((Boolean)a[3]).booleanValue();
        flag = ((Boolean)a[4]).booleanValue();
        if (obj1 != null) goto _L63; else goto _L62
_L62:
        obj1 = null;
_L64:
        ((UpgradeListener) (obj3)).onUpgrade(i, ((UpgradeInfo) (obj1)), flag1, flag);
          goto _L1
_L63:
        obj1 = new UpgradeInfo(((BetaGrayStrategy) (obj1)).a);
          goto _L64
_L18:
        obj3 = d.D.r.getPackageManager();
        if (obj3 == null) goto _L66; else goto _L65
_L65:
        obj1 = JVM INSTR new #464 <Class ComponentName>;
        ((ComponentName) (obj1)).ComponentName(d.D.r, com/tencent/bugly/beta/ui/BetaActivity.getName());
        if (((PackageManager) (obj3)).getComponentEnabledSetting(((ComponentName) (obj1))) == 2)
            ((PackageManager) (obj3)).setComponentEnabledSetting(((ComponentName) (obj1)), 1, 1);
_L66:
        ((Map)a[0]).put((Integer)a[1], (com.tencent.bugly.beta.ui.b)a[2]);
        obj1 = JVM INSTR new #488 <Class Intent>;
        ((Intent) (obj1)).Intent(d.D.r, com/tencent/bugly/beta/ui/BetaActivity);
        ((Intent) (obj1)).putExtra("frag", (Integer)a[1]);
        ((Intent) (obj1)).setFlags(0x10000000);
        d.D.r.startActivity(((Intent) (obj1)));
          goto _L1
        obj1;
        ag.e("\u65E0\u6CD5\u6B63\u5E38\u5F39\u7A97\uFF0C\u8BF7\u5728AndroidManifest.xml\u4E2D\u6DFB\u52A0BetaActivity\u58F0\u660E\uFF1A\n<activity\n    android:name=\"com.tencent.bugly.beta.ui.BetaActivity\"\n    android:theme=\"@android:style/Theme.Translucent\" />", new Object[0]);
        if (!ag.b(((Throwable) (obj1))))
            ((Exception) (obj1)).printStackTrace();
          goto _L1
_L19:
        obj1 = (UpgradeStateListener)a[0];
        i = ((Integer)a[1]).intValue();
        flag = ((Boolean)a[2]).booleanValue();
        i;
        JVM INSTR tableswitch -1 2: default 2568
    //                   -1 2571
    //                   0 2582
    //                   1 2593
    //                   2 2604;
           goto _L67 _L68 _L69 _L70 _L71
_L67:
        if (true) goto _L1; else goto _L72
_L72:
_L68:
        ((UpgradeStateListener) (obj1)).onUpgradeFailed(flag);
          goto _L1
_L69:
        ((UpgradeStateListener) (obj1)).onUpgradeSuccess(flag);
          goto _L1
_L70:
        ((UpgradeStateListener) (obj1)).onUpgradeNoVersion(flag);
          goto _L1
_L71:
        ((UpgradeStateListener) (obj1)).onUpgrading(flag);
          goto _L1
_L20:
        Beta.checkUpgrade(((Boolean)a[0]).booleanValue(), ((Boolean)a[1]).booleanValue());
          goto _L1
    }
}
