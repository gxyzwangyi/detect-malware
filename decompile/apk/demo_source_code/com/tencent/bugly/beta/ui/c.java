// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.kpdus.com/jad.html
// Decompiler options: packimports(3) fieldsfirst nonlb space 

package com.tencent.bugly.beta.ui;

import android.app.*;
import android.content.*;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageInfo;
import android.content.res.Resources;
import com.tencent.bugly.beta.Beta;
import com.tencent.bugly.beta.download.BetaReceiver;
import com.tencent.bugly.beta.download.DownloadTask;
import com.tencent.bugly.beta.global.d;
import com.tencent.bugly.proguard.*;
import java.util.Locale;

// Referenced classes of package com.tencent.bugly.beta.ui:
//            b

public final class c {

    public static final c a = new c();
    public DownloadTask b;
    public final String c;
    public b d;
    private NotificationManager e;
    private Notification f;
    private Context g;
    private boolean h;
    private long i;
    private android.support.v4.app.NotificationCompat.Builder j;

    private c() {
        h = true;
        g = d.D.r;
        c = (new StringBuilder()).append(g.getPackageName()).append(".beta.DOWNLOAD_NOTIFY").toString();
        e = (NotificationManager)g.getSystemService("notification");
        g.registerReceiver(new BetaReceiver(), new IntentFilter(c));
    }

    public final void a() {
        long l = 0L;
        if (!h || b == null || b.getSavedLength() - i <= 0x4b000L && b.getStatus() != 1 && b.getStatus() != 5 && b.getStatus() != 3) goto _L2; else goto _L1
_L1:
        i = b.getSavedLength();
        if (b.getStatus() != 1) goto _L4; else goto _L3
_L3:
        j.setAutoCancel(true).setContentText(Beta.strNotificationClickToInstall).setContentTitle(String.format("%s %s", new Object[] {
            d.D.x, Beta.strNotificationDownloadSucc
        }));
_L6:
        f = j.build();
        e.notify(1000, f);
_L2:
        return;
_L4:
        if (b.getStatus() == 5)
            j.setAutoCancel(false).setContentText(Beta.strNotificationClickToRetry).setContentTitle(String.format("%s %s", new Object[] {
                d.D.x, Beta.strNotificationDownloadError
            }));
        else
        if (b.getStatus() == 2) {
            android.support.v4.app.NotificationCompat.Builder builder = j.setContentTitle(d.D.x);
            Locale locale = Locale.getDefault();
            String s2 = Beta.strNotificationDownloading;
            if (b.getTotalLength() != 0L)
                l = (b.getSavedLength() * 100L) / b.getTotalLength();
            builder.setContentText(String.format(locale, "%s %d%%", new Object[] {
                s2, Integer.valueOf((int)l)
            })).setAutoCancel(false);
        } else
        if (b.getStatus() == 3) {
            android.support.v4.app.NotificationCompat.Builder builder1 = j.setContentTitle(d.D.x);
            Locale locale1 = Locale.getDefault();
            String s1 = Beta.strNotificationClickToContinue;
            if (b.getTotalLength() != 0L)
                l = (b.getSavedLength() * 100L) / b.getTotalLength();
            builder1.setContentText(String.format(locale1, "%s %d%%", new Object[] {
                s1, Integer.valueOf((int)l)
            })).setAutoCancel(false);
        }
        if (true) goto _L6; else goto _L5
_L5:
    }

    public final void a(DownloadTask downloadtask) {
        long l;
        l = 0L;
        b = downloadtask;
        i = b.getSavedLength();
        h = downloadtask.isNeededNotify();
        if (!h) goto _L2; else goto _L1
_L1:
        e.cancel(1000);
        downloadtask = new Intent(c);
        downloadtask.putExtra("request", 1);
        if (j == null)
            j = new android.support.v4.app.NotificationCompat.Builder(g);
        android.support.v4.app.NotificationCompat.Builder builder = j.setTicker((new StringBuilder()).append(Beta.strNotificationDownloading).append(d.D.x).toString()).setContentTitle(d.D.x);
        Locale locale = Locale.getDefault();
        String s1 = Beta.strNotificationDownloading;
        if (b.getTotalLength() != 0L)
            l = (b.getSavedLength() * 100L) / b.getTotalLength();
        builder.setContentText(String.format(locale, "%s %d%%", new Object[] {
            s1, Integer.valueOf((int)l)
        })).setContentIntent(PendingIntent.getBroadcast(g, 1, downloadtask, 0x10000000)).setAutoCancel(false);
        if (d.D.f <= 0) goto _L4; else goto _L3
_L3:
        j.setSmallIcon(d.D.f);
_L6:
        if (d.D.g > 0 && g.getResources().getDrawable(d.D.g) != null)
            j.setLargeIcon(com.tencent.bugly.proguard.a.a(g.getResources().getDrawable(d.D.g)));
        f = j.build();
        e.notify(1000, f);
_L2:
        return;
_L4:
        if (d.D.y != null && d.D.y.applicationInfo != null)
            j.setSmallIcon(d.D.y.applicationInfo.icon);
        if (true) goto _L6; else goto _L5
_L5:
    }

    public final void a(s s1, b b1) {
        this;
        JVM INSTR monitorenter ;
        d = b1;
        e.cancel(1001);
        b1 = JVM INSTR new #193 <Class Intent>;
        b1.Intent(c);
        b1.putExtra("request", 2);
        if (j == null) {
            android.support.v4.app.NotificationCompat.Builder builder = JVM INSTR new #108 <Class android.support.v4.app.NotificationCompat$Builder>;
            builder.android.support.v4.app.NotificationCompat.Builder(g);
            j = builder;
        }
        android.support.v4.app.NotificationCompat.Builder builder1 = j;
        StringBuilder stringbuilder = JVM INSTR new #48  <Class StringBuilder>;
        stringbuilder.StringBuilder();
        builder1.setTicker(stringbuilder.append(d.D.x).append(Beta.strNotificationHaveNewVersion).toString()).setContentTitle(String.format("%s %s", new Object[] {
            d.D.x, Beta.strNotificationHaveNewVersion
        })).setContentIntent(PendingIntent.getBroadcast(g, 2, b1, 0x10000000)).setAutoCancel(true).setContentText(String.format("%s.%s", new Object[] {
            s1.e.b, Integer.valueOf(s1.e.a)
        }));
        if (d.D.f <= 0) goto _L2; else goto _L1
_L1:
        j.setSmallIcon(d.D.f);
_L4:
        if (d.D.g > 0 && g.getResources().getDrawable(d.D.g) != null)
            j.setLargeIcon(com.tencent.bugly.proguard.a.a(g.getResources().getDrawable(d.D.g)));
        f = j.build();
        e.notify(1001, f);
        this;
        JVM INSTR monitorexit ;
        return;
_L2:
        if (d.D.y == null || d.D.y.applicationInfo == null) goto _L4; else goto _L3
_L3:
        j.setSmallIcon(d.D.y.applicationInfo.icon);
          goto _L4
        s1;
        throw s1;
    }

}
