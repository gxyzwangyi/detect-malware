// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.kpdus.com/jad.html
// Decompiler options: packimports(3) fieldsfirst nonlb space 

package com.tencent.bugly.beta.download;

import android.util.Log;
import com.tencent.bugly.beta.global.ResBean;
import com.tencent.bugly.beta.global.d;
import com.tencent.bugly.beta.global.e;
import com.tencent.bugly.beta.ui.g;
import com.tencent.bugly.beta.upgrade.BetaGrayStrategy;
import com.tencent.bugly.beta.upgrade.c;
import com.tencent.bugly.proguard.ag;
import com.tencent.bugly.proguard.l;
import com.tencent.bugly.proguard.o;
import com.tencent.bugly.proguard.q;
import com.tencent.bugly.proguard.s;
import java.io.File;
import java.util.Collection;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;

// Referenced classes of package com.tencent.bugly.beta.download:
//            DownloadListener, DownloadTask, b, BetaReceiver

public final class a
    implements DownloadListener {

    private int a;
    private Object b[];

    public transient a(int i, Object aobj[]) {
        a = i;
        b = aobj;
    }

    public final void onCompleted(DownloadTask downloadtask) {
        a;
        JVM INSTR tableswitch 1 3: default 32
    //                   1 33
    //                   2 320
    //                   3 336;
           goto _L1 _L2 _L3 _L4
_L1:
        return;
_L2:
        downloadtask = ((DownloadTask) (b[0]));
        downloadtask;
        JVM INSTR monitorenter ;
        Object obj;
        Object obj1;
        obj = (e)b[0];
        obj1 = (Map)b[1];
        if (((Map) (obj1)).size() != 0) goto _L5; else goto _L1
        obj;
        downloadtask;
        JVM INSTR monitorexit ;
        throw obj;
_L5:
        int i = 0;
        for (Iterator iterator = ((Map) (obj1)).values().iterator(); iterator.hasNext();)
            if (((DownloadTask)iterator.next()).getStatus() == 1)
                i++;

        StringBuilder stringbuilder = JVM INSTR new #67  <Class StringBuilder>;
        stringbuilder.StringBuilder();
        ag.c(stringbuilder.append(i).append(" has completed").toString(), new Object[0]);
        if (i >= ((Map) (obj1)).size()) goto _L7; else goto _L6
_L6:
        downloadtask;
        JVM INSTR monitorexit ;
          goto _L1
_L7:
        Iterator iterator1 = ((Map) (obj1)).keySet().iterator();
        do {
            if (!iterator1.hasNext())
                break;
            String s1 = (String)iterator1.next();
            if (((DownloadTask)((Map) (obj1)).get(s1)).getSaveFile() != null && ((DownloadTask)((Map) (obj1)).get(s1)).getSaveFile().exists())
                ResBean.a.a(s1, ((DownloadTask)((Map) (obj1)).get(s1)).getSaveFile().getAbsolutePath());
        } while (true);
        com.tencent.bugly.proguard.a.a("rb.bch", ResBean.a);
        e.a();
        ((e) (obj)).b();
        downloadtask;
        JVM INSTR monitorexit ;
          goto _L1
_L3:
        try {
            ((g)b[0]).a(downloadtask);
        }
        // Misplaced declaration of an exception variable
        catch (DownloadTask downloadtask) {
            if (!ag.b(downloadtask))
                downloadtask.printStackTrace();
        }
          goto _L1
_L4:
        c c1;
        c1 = (c)b[0];
        obj1 = (Integer)b[1];
        obj = c1.b;
        if (obj == null) goto _L1; else goto _L8
_L8:
        if (((BetaGrayStrategy) (obj)).a == null) goto _L1; else goto _L9
_L9:
        Object obj2;
        obj2 = l.a;
        q q1 = JVM INSTR new #152 <Class q>;
        q1.q("download", System.currentTimeMillis(), (byte)0, downloadtask.getCostTime(), ((BetaGrayStrategy) (obj)).a.e, ((BetaGrayStrategy) (obj)).a.k, ((BetaGrayStrategy) (obj)).a.n, null);
        ((l) (obj2)).a(q1);
        obj2 = downloadtask.getSaveFile();
        if (!com.tencent.bugly.proguard.a.a(d.D.r, ((File) (obj2)), ((BetaGrayStrategy) (obj)).a.f.a)) goto _L11; else goto _L10
_L10:
        b[1] = Integer.valueOf(0);
        obj1 = l.a;
        downloadtask = JVM INSTR new #152 <Class q>;
        downloadtask.q("install", System.currentTimeMillis(), (byte)0, 0L, ((BetaGrayStrategy) (obj)).a.e, ((BetaGrayStrategy) (obj)).a.k, ((BetaGrayStrategy) (obj)).a.n, null);
        ((l) (obj1)).a(downloadtask);
          goto _L1
_L11:
        if (((Integer) (obj1)).intValue() >= 2) goto _L13; else goto _L12
_L12:
        b[1] = Integer.valueOf(((Integer) (obj1)).intValue() + 1);
        downloadtask.delete(true);
        c1.c = d.D.o.a(((BetaGrayStrategy) (obj)).a.f.b, d.D.s.getAbsolutePath(), null, ((BetaGrayStrategy) (obj)).a.f.a);
        g.p.a(((BetaGrayStrategy) (obj)).a, c1.c);
        c1.c.addListener(this);
        BetaReceiver.addTask(c1.c);
        c1.c.download();
          goto _L1
_L13:
        b[1] = Integer.valueOf(0);
        onFailed(downloadtask, 2080, "\u6587\u4EF6MD5\u9A8C\u8BC1\u5931\u8D25");
        downloadtask.delete(true);
          goto _L1
    }

    public final void onFailed(DownloadTask downloadtask, int i, String s1) {
        a;
        JVM INSTR tableswitch 1 3: default 32
    //                   1 33
    //                   2 84
    //                   3 100;
           goto _L1 _L2 _L3 _L4
_L1:
        return;
_L2:
        synchronized (b[0]) {
            s1 = (e)b[0];
            e.a();
            s1.b();
        }
          goto _L1
        s1;
        downloadtask;
        JVM INSTR monitorexit ;
        throw s1;
_L3:
        try {
            ((g)b[0]).a(downloadtask);
        }
        // Misplaced declaration of an exception variable
        catch (DownloadTask downloadtask) {
            if (!ag.b(downloadtask))
                downloadtask.printStackTrace();
        }
          goto _L1
_L4:
        c c1 = (c)b[0];
        if (downloadtask == null)
            break MISSING_BLOCK_LABEL_182;
        l l1 = l.a;
        q q1 = JVM INSTR new #152 <Class q>;
        q1.q("download", System.currentTimeMillis(), (byte)1, downloadtask.getCostTime(), c1.b.a.e, c1.b.a.k, c1.b.a.n, null);
        l1.a(q1);
        ag.e("upgrade failed\uFF1A(%d)%s", new Object[] {
            Integer.valueOf(i), s1
        });
        Log.e(ag.a, "\u4E0B\u8F7D\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5");
          goto _L1
    }

    public final void onReceive(DownloadTask downloadtask) {
        a;
        JVM INSTR tableswitch 2 2: default 24
    //                   2 25;
           goto _L1 _L2
_L1:
        return;
_L2:
        ((g)b[0]).a(downloadtask);
        if (true) goto _L1; else goto _L3
_L3:
    }
}
