// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.kpdus.com/jad.html
// Decompiler options: packimports(3) fieldsfirst nonlb space 

package com.tencent.bugly.crashreport.crash.h5;

import android.webkit.WebView;
import com.tencent.bugly.crashreport.inner.InnerAPI;
import com.tencent.bugly.proguard.a;
import com.tencent.bugly.proguard.ag;
import java.util.*;
import org.json.JSONObject;

// Referenced classes of package com.tencent.bugly.crashreport.crash.h5:
//            a

public class H5JavaScriptInterface {

    private static HashSet a = new HashSet();
    private String b;
    private Thread c;
    private String d;
    private Map e;

    private H5JavaScriptInterface() {
        b = null;
        c = null;
        d = null;
        e = null;
    }

    private static com.tencent.bugly.crashreport.crash.h5.a a(String s) {
        Object obj;
        Object obj1;
        obj1 = null;
        obj = obj1;
        if (s == null) goto _L2; else goto _L1
_L1:
        if (s.length() > 0) goto _L4; else goto _L3
_L3:
        obj = obj1;
_L2:
        return ((com.tencent.bugly.crashreport.crash.h5.a) (obj));
_L4:
        int i;
        JSONObject jsonobject;
        String s1;
        try {
            jsonobject = JVM INSTR new #45  <Class JSONObject>;
            jsonobject.JSONObject(s);
            s = JVM INSTR new #50  <Class com.tencent.bugly.crashreport.crash.h5.a>;
            s.com.tencent.bugly.crashreport.crash.h5.a();
            s.a = jsonobject.getString("projectRoot");
        }
        // Misplaced declaration of an exception variable
        catch (String s) {
            obj = obj1;
            if (!ag.a(s)) {
                s.printStackTrace();
                obj = obj1;
            }
            continue; /* Loop/switch isn't completed */
        }
        obj = obj1;
        if (((com.tencent.bugly.crashreport.crash.h5.a) (s)).a == null)
            continue; /* Loop/switch isn't completed */
        s.b = jsonobject.getString("context");
        obj = obj1;
        if (((com.tencent.bugly.crashreport.crash.h5.a) (s)).b == null)
            continue; /* Loop/switch isn't completed */
        s.c = jsonobject.getString("url");
        obj = obj1;
        if (((com.tencent.bugly.crashreport.crash.h5.a) (s)).c == null)
            continue; /* Loop/switch isn't completed */
        s.d = jsonobject.getString("userAgent");
        obj = obj1;
        if (((com.tencent.bugly.crashreport.crash.h5.a) (s)).d == null)
            continue; /* Loop/switch isn't completed */
        s.e = jsonobject.getString("language");
        obj = obj1;
        if (((com.tencent.bugly.crashreport.crash.h5.a) (s)).e == null)
            continue; /* Loop/switch isn't completed */
        s.f = jsonobject.getString("name");
        obj = obj1;
        if (((com.tencent.bugly.crashreport.crash.h5.a) (s)).f == null)
            continue; /* Loop/switch isn't completed */
        obj = obj1;
        if (((com.tencent.bugly.crashreport.crash.h5.a) (s)).f.equals("null"))
            continue; /* Loop/switch isn't completed */
        s1 = jsonobject.getString("stacktrace");
        obj = obj1;
        if (s1 == null)
            continue; /* Loop/switch isn't completed */
        i = s1.indexOf("\n");
        if (i >= 0)
            break MISSING_BLOCK_LABEL_234;
        ag.d("H5 crash stack's format is wrong!", new Object[0]);
        obj = obj1;
        continue; /* Loop/switch isn't completed */
        s.h = s1.substring(i + 1);
        s.g = s1.substring(0, i);
        i = ((com.tencent.bugly.crashreport.crash.h5.a) (s)).g.indexOf(":");
        if (i <= 0)
            break MISSING_BLOCK_LABEL_285;
        s.g = ((com.tencent.bugly.crashreport.crash.h5.a) (s)).g.substring(i + 1);
        s.i = jsonobject.getString("file");
        obj = obj1;
        if (((com.tencent.bugly.crashreport.crash.h5.a) (s)).f == null)
            continue; /* Loop/switch isn't completed */
        s.j = jsonobject.getLong("lineNumber");
        obj = obj1;
        if (((com.tencent.bugly.crashreport.crash.h5.a) (s)).j < 0L)
            continue; /* Loop/switch isn't completed */
        s.k = jsonobject.getLong("columnNumber");
        obj = obj1;
        if (((com.tencent.bugly.crashreport.crash.h5.a) (s)).k < 0L)
            continue; /* Loop/switch isn't completed */
        ag.a("H5 crash information is following: ", new Object[0]);
        obj = JVM INSTR new #146 <Class StringBuilder>;
        ((StringBuilder) (obj)).StringBuilder("[projectRoot]: ");
        ag.a(((StringBuilder) (obj)).append(((com.tencent.bugly.crashreport.crash.h5.a) (s)).a).toString(), new Object[0]);
        obj = JVM INSTR new #146 <Class StringBuilder>;
        ((StringBuilder) (obj)).StringBuilder("[context]: ");
        ag.a(((StringBuilder) (obj)).append(((com.tencent.bugly.crashreport.crash.h5.a) (s)).b).toString(), new Object[0]);
        obj = JVM INSTR new #146 <Class StringBuilder>;
        ((StringBuilder) (obj)).StringBuilder("[url]: ");
        ag.a(((StringBuilder) (obj)).append(((com.tencent.bugly.crashreport.crash.h5.a) (s)).c).toString(), new Object[0]);
        obj = JVM INSTR new #146 <Class StringBuilder>;
        ((StringBuilder) (obj)).StringBuilder("[userAgent]: ");
        ag.a(((StringBuilder) (obj)).append(((com.tencent.bugly.crashreport.crash.h5.a) (s)).d).toString(), new Object[0]);
        obj = JVM INSTR new #146 <Class StringBuilder>;
        ((StringBuilder) (obj)).StringBuilder("[language]: ");
        ag.a(((StringBuilder) (obj)).append(((com.tencent.bugly.crashreport.crash.h5.a) (s)).e).toString(), new Object[0]);
        obj = JVM INSTR new #146 <Class StringBuilder>;
        ((StringBuilder) (obj)).StringBuilder("[name]: ");
        ag.a(((StringBuilder) (obj)).append(((com.tencent.bugly.crashreport.crash.h5.a) (s)).f).toString(), new Object[0]);
        obj = JVM INSTR new #146 <Class StringBuilder>;
        ((StringBuilder) (obj)).StringBuilder("[message]: ");
        ag.a(((StringBuilder) (obj)).append(((com.tencent.bugly.crashreport.crash.h5.a) (s)).g).toString(), new Object[0]);
        obj = JVM INSTR new #146 <Class StringBuilder>;
        ((StringBuilder) (obj)).StringBuilder("[stacktrace]: \n");
        ag.a(((StringBuilder) (obj)).append(((com.tencent.bugly.crashreport.crash.h5.a) (s)).h).toString(), new Object[0]);
        obj = JVM INSTR new #146 <Class StringBuilder>;
        ((StringBuilder) (obj)).StringBuilder("[file]: ");
        ag.a(((StringBuilder) (obj)).append(((com.tencent.bugly.crashreport.crash.h5.a) (s)).i).toString(), new Object[0]);
        obj = JVM INSTR new #146 <Class StringBuilder>;
        ((StringBuilder) (obj)).StringBuilder("[lineNumber]: ");
        ag.a(((StringBuilder) (obj)).append(((com.tencent.bugly.crashreport.crash.h5.a) (s)).j).toString(), new Object[0]);
        obj = JVM INSTR new #146 <Class StringBuilder>;
        ((StringBuilder) (obj)).StringBuilder("[columnNumber]: ");
        ag.a(((StringBuilder) (obj)).append(((com.tencent.bugly.crashreport.crash.h5.a) (s)).k).toString(), new Object[0]);
        obj = s;
        if (true) goto _L2; else goto _L5
_L5:
    }

    public static H5JavaScriptInterface getInstance(WebView webview) {
        Object obj;
        H5JavaScriptInterface h5javascriptinterface;
        Object obj1;
        obj1 = null;
        h5javascriptinterface = null;
        obj = h5javascriptinterface;
        if (webview == null) goto _L2; else goto _L1
_L1:
        if (!a.contains(Integer.valueOf(webview.hashCode()))) goto _L4; else goto _L3
_L3:
        obj = h5javascriptinterface;
_L2:
        return ((H5JavaScriptInterface) (obj));
_L4:
        h5javascriptinterface = new H5JavaScriptInterface();
        a.add(Integer.valueOf(webview.hashCode()));
        h5javascriptinterface.c = Thread.currentThread();
        obj = h5javascriptinterface.c;
        if (obj != null)
            break; /* Loop/switch isn't completed */
        obj = obj1;
_L6:
        h5javascriptinterface.d = ((String) (obj));
        obj = new HashMap();
        ((Map) (obj)).put("[WebView] ContentDescription", (new StringBuilder()).append(webview.getContentDescription()).toString());
        h5javascriptinterface.e = ((Map) (obj));
        obj = h5javascriptinterface;
        if (true) goto _L2; else goto _L5
_L5:
        StringBuilder stringbuilder = new StringBuilder();
        stringbuilder.append("\n");
        for (int i = 2; i < ((Thread) (obj)).getStackTrace().length; i++) {
            StackTraceElement stacktraceelement = ((Thread) (obj)).getStackTrace()[i];
            if (!stacktraceelement.toString().contains("crashreport"))
                stringbuilder.append(stacktraceelement.toString()).append("\n");
        }

        obj = stringbuilder.toString();
          goto _L6
        if (true) goto _L2; else goto _L7
_L7:
    }

    public void printLog(String s) {
        ag.d("Log from js: %s", new Object[] {
            s
        });
    }

    public void reportJSException(String s) {
        if (s != null) goto _L2; else goto _L1
_L1:
        ag.d("Payload from JS is null.", new Object[0]);
_L4:
        return;
_L2:
        Object obj = com.tencent.bugly.proguard.a.c(s.getBytes());
        if (b != null && b.equals(obj)) {
            ag.d("Same payload from js. Please check whether you've injected bugly.js more than one times.", new Object[0]);
        } else {
            b = ((String) (obj));
            ag.d("Handling JS exception ...", new Object[0]);
            obj = a(s);
            if (obj == null) {
                ag.d("Failed to parse payload.", new Object[0]);
            } else {
                s = new LinkedHashMap();
                Object obj1 = new LinkedHashMap();
                if (((com.tencent.bugly.crashreport.crash.h5.a) (obj)).a != null)
                    ((Map) (obj1)).put("[JS] projectRoot", ((com.tencent.bugly.crashreport.crash.h5.a) (obj)).a);
                if (((com.tencent.bugly.crashreport.crash.h5.a) (obj)).b != null)
                    ((Map) (obj1)).put("[JS] context", ((com.tencent.bugly.crashreport.crash.h5.a) (obj)).b);
                if (((com.tencent.bugly.crashreport.crash.h5.a) (obj)).c != null)
                    ((Map) (obj1)).put("[JS] url", ((com.tencent.bugly.crashreport.crash.h5.a) (obj)).c);
                if (((com.tencent.bugly.crashreport.crash.h5.a) (obj)).d != null)
                    ((Map) (obj1)).put("[JS] userAgent", ((com.tencent.bugly.crashreport.crash.h5.a) (obj)).d);
                if (((com.tencent.bugly.crashreport.crash.h5.a) (obj)).i != null)
                    ((Map) (obj1)).put("[JS] file", ((com.tencent.bugly.crashreport.crash.h5.a) (obj)).i);
                if (((com.tencent.bugly.crashreport.crash.h5.a) (obj)).j != 0L)
                    ((Map) (obj1)).put("[JS] lineNumber", Long.toString(((com.tencent.bugly.crashreport.crash.h5.a) (obj)).j));
                s.putAll(((Map) (obj1)));
                s.putAll(e);
                s.put("Java Stack", d);
                obj1 = c;
                if (obj != null)
                    InnerAPI.postH5CrashAsync(((Thread) (obj1)), ((com.tencent.bugly.crashreport.crash.h5.a) (obj)).f, ((com.tencent.bugly.crashreport.crash.h5.a) (obj)).g, ((com.tencent.bugly.crashreport.crash.h5.a) (obj)).h, s);
            }
        }
        if (true) goto _L4; else goto _L3
_L3:
    }

}
