// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.kpdus.com/jad.html
// Decompiler options: packimports(3) fieldsfirst nonlb space 

package com.tencent.bugly.crashreport.biz;

import android.app.Activity;
import android.app.Application;
import android.content.Context;
import android.os.Bundle;
import com.tencent.bugly.BuglyStrategy;
import com.tencent.bugly.crashreport.common.strategy.StrategyBean;
import com.tencent.bugly.proguard.a;
import com.tencent.bugly.proguard.ad;
import com.tencent.bugly.proguard.af;
import com.tencent.bugly.proguard.ag;
import java.util.List;

// Referenced classes of package com.tencent.bugly.crashreport.biz:
//            a, UserInfoBean

public final class b {

    public static com.tencent.bugly.crashreport.biz.a a;
    private static boolean b;
    private static int c = 10;
    private static long d = 0x493e0L;
    private static long e = 30000L;
    private static long f = 0L;
    private static int g;
    private static long h;
    private static long i;
    private static long j = 0L;
    private static android.app.Application.ActivityLifecycleCallbacks k = null;
    private static Class l = null;
    private static boolean m = true;

    static String a(String s, String s1) {
        StringBuilder stringbuilder = new StringBuilder();
        stringbuilder.append(com.tencent.bugly.proguard.a.b());
        stringbuilder.append("  ");
        stringbuilder.append(s);
        stringbuilder.append("  ");
        stringbuilder.append(s1);
        stringbuilder.append("\n");
        return stringbuilder.toString();
    }

    public static void a() {
        if (a != null)
            a.a(2, false, 0L);
    }

    public static void a(long l1) {
        long l2 = l1;
        if (l1 < 0L)
            l2 = com.tencent.bugly.crashreport.common.strategy.a.a().c().q;
        f = l2;
    }

    public static void a(Context context) {
        if (b && context != null) goto _L2; else goto _L1
_L1:
        return;
_L2:
        Application application = null;
        if (android.os.Build.VERSION.SDK_INT >= 14) {
            if (context.getApplicationContext() instanceof Application)
                application = (Application)context.getApplicationContext();
            if (application != null)
                try {
                    if (k != null)
                        application.unregisterActivityLifecycleCallbacks(k);
                }
                // Misplaced declaration of an exception variable
                catch (Context context) {
                    if (!ag.a(context))
                        context.printStackTrace();
                }
        }
        b = false;
        if (true) goto _L1; else goto _L3
_L3:
    }

    public static void a(Context context, BuglyStrategy buglystrategy) {
        if (!b) {
            e = com.tencent.bugly.crashreport.common.strategy.a.a().c().q;
            c = com.tencent.bugly.crashreport.common.strategy.a.a().c().w;
            a = new com.tencent.bugly.crashreport.biz.a(context);
            b = true;
            m = com.tencent.bugly.crashreport.common.info.a.a(context).e;
            long l1;
            if (buglystrategy != null) {
                l = buglystrategy.getUserInfoActivity();
                l1 = buglystrategy.getAppReportDelay();
            } else {
                l1 = 0L;
            }
            if (l1 <= 0L)
                c(context, buglystrategy);
            else
                af.a().a(new Runnable(context, buglystrategy) {

                    private Context a;
                    private BuglyStrategy b;

                    public final void run() {
                        b.b(a, b);
                    }

             {
                a = context;
                b = buglystrategy;
                super();
            }
                }
, l1);
        }
    }

    public static void a(StrategyBean strategybean) {
        if (strategybean != null) goto _L2; else goto _L1
_L1:
        return;
_L2:
        if (strategybean.q > 0L)
            e = strategybean.q;
        if (strategybean.w > 0)
            c = strategybean.w;
        if (strategybean.x > 0L)
            d = strategybean.x;
        if (true) goto _L1; else goto _L3
_L3:
    }

    static long b(long l1) {
        j = l1;
        return l1;
    }

    static Class b() {
        return l;
    }

    static void b(Context context, BuglyStrategy buglystrategy) {
        c(context, buglystrategy);
    }

    static long c() {
        return i;
    }

    static long c(long l1) {
        h = l1;
        return l1;
    }

    private static void c(Context context, BuglyStrategy buglystrategy) {
        int i1;
        boolean flag;
        int j1;
        boolean flag1;
        boolean flag2;
        long l1;
        Object obj;
        UserInfoBean userinfobean;
        StackTraceElement astacktraceelement[];
        StackTraceElement stacktraceelement;
        if (buglystrategy != null) {
            flag2 = buglystrategy.recordUserInfoOnceADay();
            flag1 = buglystrategy.isEnableUserInfo();
        } else {
            flag1 = true;
            flag2 = false;
        }
        if (!flag2)
            break MISSING_BLOCK_LABEL_158;
        buglystrategy = com.tencent.bugly.crashreport.common.info.a.a(context);
        obj = ((com.tencent.bugly.crashreport.common.info.a) (buglystrategy)).d;
        obj = a.a(((String) (obj)));
        if (obj == null) goto _L2; else goto _L1
_L1:
        i1 = 0;
_L6:
        if (i1 >= ((List) (obj)).size()) goto _L2; else goto _L3
_L3:
        userinfobean = (UserInfoBean)((List) (obj)).get(i1);
        if (!userinfobean.n.equals(((com.tencent.bugly.crashreport.common.info.a) (buglystrategy)).j) || userinfobean.b != 1)
            continue; /* Loop/switch isn't completed */
        l1 = com.tencent.bugly.proguard.a.c();
        if (l1 <= 0L)
            break; /* Loop/switch isn't completed */
        if (userinfobean.e < l1)
            continue; /* Loop/switch isn't completed */
        if (userinfobean.f <= 0L)
            a.a(false);
        i1 = 0;
_L7:
        if (i1 != 0) goto _L5; else goto _L4
_L4:
        return;
        i1++;
          goto _L6
_L2:
        i1 = 1;
          goto _L7
_L5:
        flag1 = false;
        obj = com.tencent.bugly.crashreport.common.info.a.a();
        if (obj != null) {
            flag = false;
            astacktraceelement = Thread.currentThread().getStackTrace();
            j1 = astacktraceelement.length;
            buglystrategy = null;
            for (i1 = 0; i1 < j1; i1++) {
                stacktraceelement = astacktraceelement[i1];
                if (stacktraceelement.getMethodName().equals("onCreate"))
                    buglystrategy = stacktraceelement.getClassName();
                if (stacktraceelement.getClassName().equals("android.app.Activity"))
                    flag = true;
            }

            if (buglystrategy != null) {
                if (flag)
                    obj.o = true;
                else
                    buglystrategy = "background";
            } else {
                buglystrategy = "unknown";
            }
            obj.p = buglystrategy;
        }
        if (flag1) {
            buglystrategy = null;
            if (android.os.Build.VERSION.SDK_INT >= 14) {
                if (context.getApplicationContext() instanceof Application)
                    buglystrategy = (Application)context.getApplicationContext();
                if (buglystrategy != null)
                    try {
                        if (k == null) {
                            context = JVM INSTR new #8   <Class b$2>;
                            context._cls2();
                            k = context;
                        }
                        buglystrategy.registerActivityLifecycleCallbacks(k);
                    }
                    // Misplaced declaration of an exception variable
                    catch (Context context) {
                        if (!ag.a(context))
                            context.printStackTrace();
                    }
            }
        }
        if (m) {
            i = System.currentTimeMillis();
            a.a(1, true, 0L);
            ad.a().a(1001, System.currentTimeMillis());
            ag.a("[session] launch app, new start", new Object[0]);
            a.a();
            context = a;
            af.a().a(new a.c(context, 0x1499700L), 0x1499700L);
        }
          goto _L4
    }

    static long d() {
        return h;
    }

    static long e() {
        return f;
    }

    static long f() {
        return e;
    }

    static int g() {
        int i1 = g;
        g = i1 + 1;
        return i1;
    }

    static int h() {
        return g;
    }

    static int i() {
        return c;
    }

    static boolean j() {
        return m;
    }

    static long k() {
        return j;
    }

    static long l() {
        return d;
    }


    // Unreferenced inner class com/tencent/bugly/crashreport/biz/b$2

/* anonymous class */
    static final class _cls2
        implements android.app.Application.ActivityLifecycleCallbacks {

        public final void onActivityCreated(Activity activity, Bundle bundle) {
            bundle = "unknown";
            if (activity != null)
                bundle = activity.getClass().getName();
            if (b.b() == null || b.b().getName().equals(bundle)) goto _L2; else goto _L1
_L1:
            return;
_L2:
            ag.c(">>> %s onCreated <<<", new Object[] {
                bundle
            });
            activity = com.tencent.bugly.crashreport.common.info.a.a();
            if (activity != null)
                ((com.tencent.bugly.crashreport.common.info.a) (activity)).B.add(com.tencent.bugly.crashreport.biz.b.a(bundle, "onCreated"));
            if (true) goto _L1; else goto _L3
_L3:
        }

        public final void onActivityDestroyed(Activity activity) {
        }

        public final void onActivityPaused(Activity activity) {
            String s;
            s = "unknown";
            if (activity != null)
                s = activity.getClass().getName();
            if (b.b() == null || b.b().getName().equals(s)) goto _L2; else goto _L1
_L1:
            return;
_L2:
            ag.c(">>> %s onPaused <<<", new Object[] {
                s
            });
            com.tencent.bugly.crashreport.common.info.a a1 = com.tencent.bugly.crashreport.common.info.a.a();
            if (a1 != null) {
                a1.B.add(com.tencent.bugly.crashreport.biz.b.a(s, "onPaused"));
                a1.o = false;
                a1.r = System.currentTimeMillis();
                a1.s = a1.r - a1.q;
                b.c(a1.r);
                if (a1.s < 0L)
                    a1.s = 0L;
                if (activity != null)
                    a1.p = "background";
                else
                    a1.p = "unknown";
            }
            if (true) goto _L1; else goto _L3
_L3:
        }

        public final void onActivityResumed(Activity activity) {
            String s;
            s = "unknown";
            if (activity != null)
                s = activity.getClass().getName();
            if (b.b() == null || b.b().getName().equals(s)) goto _L2; else goto _L1
_L1:
            return;
_L2:
            ag.c(">>> %s onResumed <<<", new Object[] {
                s
            });
            activity = com.tencent.bugly.crashreport.common.info.a.a();
            if (activity != null) {
                ((com.tencent.bugly.crashreport.common.info.a) (activity)).B.add(com.tencent.bugly.crashreport.biz.b.a(s, "onResumed"));
                activity.o = true;
                activity.p = s;
                activity.q = System.currentTimeMillis();
                activity.t = ((com.tencent.bugly.crashreport.common.info.a) (activity)).q - b.c();
                long l4 = ((com.tencent.bugly.crashreport.common.info.a) (activity)).q - b.d();
                long l1;
                if (b.e() > 0L)
                    l1 = b.e();
                else
                    l1 = b.f();
                if (l4 > l1) {
                    activity.c();
                    b.g();
                    ag.a("[session] launch app one times (app in background %d seconds and over %d seconds)", new Object[] {
                        Long.valueOf(l4 / 1000L), Long.valueOf(b.f() / 1000L)
                    });
                    if (b.h() % b.i() == 0) {
                        com.tencent.bugly.crashreport.biz.b.a.a(4, b.j(), 0L);
                    } else {
                        com.tencent.bugly.crashreport.biz.b.a.a(4, false, 0L);
                        long l2 = System.currentTimeMillis();
                        if (l2 - b.k() > b.l()) {
                            b.b(l2);
                            ag.a("add a timer to upload hot start user info", new Object[0]);
                            if (b.j()) {
                                activity = com.tencent.bugly.crashreport.biz.b.a;
                                long l3 = b.l();
                                af.a().a(new a.a(activity, null, true), l3);
                            }
                        }
                    }
                }
            }
            if (true) goto _L1; else goto _L3
_L3:
        }

        public final void onActivitySaveInstanceState(Activity activity, Bundle bundle) {
        }

        public final void onActivityStarted(Activity activity) {
        }

        public final void onActivityStopped(Activity activity) {
        }

    }

}
