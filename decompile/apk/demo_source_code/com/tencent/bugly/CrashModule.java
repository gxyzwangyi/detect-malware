// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.kpdus.com/jad.html
// Decompiler options: packimports(3) fieldsfirst nonlb space 

package com.tencent.bugly;

import android.content.Context;
import android.text.TextUtils;
import com.tencent.bugly.crashreport.CrashReport;
import com.tencent.bugly.crashreport.common.info.a;
import com.tencent.bugly.crashreport.common.strategy.StrategyBean;
import com.tencent.bugly.crashreport.crash.BuglyBroadcastRecevier;
import com.tencent.bugly.crashreport.crash.c;
import com.tencent.bugly.crashreport.crash.d;
import com.tencent.bugly.crashreport.inner.InnerAPI;
import com.tencent.bugly.proguard.ag;
import com.tencent.bugly.proguard.w;

// Referenced classes of package com.tencent.bugly:
//            a, BuglyStrategy

public class CrashModule extends com.tencent.bugly.a {

    public static final int MODULE_ID = 1004;
    private static int c = 0;
    private static boolean d = false;
    private static CrashModule e = new CrashModule();
    private long a;
    private BuglyStrategy.a b;

    public CrashModule() {
    }

    private void a(Context context, BuglyStrategy buglystrategy) {
        this;
        JVM INSTR monitorenter ;
        if (buglystrategy != null) goto _L2; else goto _L1
_L1:
        this;
        JVM INSTR monitorexit ;
        return;
_L2:
        String s = buglystrategy.getLibBuglySOFilePath();
        if (!TextUtils.isEmpty(s)) {
            com.tencent.bugly.crashreport.common.info.a.a(context).l = s;
            ag.a("setted libBugly.so file path :%s", new Object[] {
                s
            });
        }
        if (buglystrategy.getCrashHandleCallback() != null) {
            b = buglystrategy.getCrashHandleCallback();
            ag.a("setted CrashHanldeCallback", new Object[0]);
        }
        if (buglystrategy.getAppReportDelay() > 0L) {
            a = buglystrategy.getAppReportDelay();
            ag.a("setted delay: %d", new Object[] {
                Long.valueOf(a)
            });
        }
        if (true) goto _L1; else goto _L3
_L3:
        context;
        throw context;
    }

    public static CrashModule getInstance() {
        e.id = 1004;
        return e;
    }

    public static boolean hasInitialized() {
        return d;
    }

    public String[] getTables() {
        return (new String[] {
            "t_cr"
        });
    }

    public void init(Context context, boolean flag, BuglyStrategy buglystrategy) {
        this;
        JVM INSTR monitorenter ;
        if (context == null) goto _L2; else goto _L1
_L1:
        boolean flag1 = d;
        if (!flag1) goto _L3; else goto _L2
_L2:
        this;
        JVM INSTR monitorexit ;
        return;
_L3:
        Object obj;
        ag.a("Initializing crash module.", new Object[0]);
        obj = w.a();
        int i = c + 1;
        c = i;
        ((w) (obj)).a(1004, i);
        d = true;
        CrashReport.setContext(context);
        a(context, buglystrategy);
        com.tencent.bugly.crashreport.crash.c.a(1004, context, flag, b, null, null);
        obj = com.tencent.bugly.crashreport.crash.c.a();
        ((c) (obj)).e();
        if (buglystrategy == null) goto _L5; else goto _L4
_L4:
        if (!buglystrategy.isEnableNativeCrashMonitor()) goto _L6; else goto _L5
_L5:
        ((c) (obj)).g();
_L7:
        if (buglystrategy == null)
            break MISSING_BLOCK_LABEL_121;
        if (!buglystrategy.isEnableANRCrashMonitor())
            break MISSING_BLOCK_LABEL_210;
        ((c) (obj)).h();
_L8:
        InnerAPI.context = context;
        com.tencent.bugly.crashreport.crash.d.a(context);
        com.tencent.bugly.crashreport.crash.c.a().a(a);
        buglystrategy = BuglyBroadcastRecevier.getInstance();
        buglystrategy.addFilter("android.net.conn.CONNECTIVITY_CHANGE");
        buglystrategy.regist(context);
        context = w.a();
        int j = c - 1;
        c = j;
        context.a(1004, j);
          goto _L2
        context;
        throw context;
_L6:
        ag.a("[crash] Closed native crash monitor!", new Object[0]);
        ((c) (obj)).f();
          goto _L7
        ag.a("[crash] Closed ANR monitor!", new Object[0]);
        ((c) (obj)).i();
          goto _L8
    }

    public void onServerStrategyChanged(StrategyBean strategybean) {
        if (strategybean != null) {
            c c1 = com.tencent.bugly.crashreport.crash.c.a();
            if (c1 != null)
                c1.a(strategybean);
            com.tencent.bugly.crashreport.crash.d.a(strategybean);
        }
    }

}
