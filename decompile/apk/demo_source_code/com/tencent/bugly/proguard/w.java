// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.kpdus.com/jad.html
// Decompiler options: packimports(3) fieldsfirst nonlb space 

package com.tencent.bugly.proguard;

import android.content.Context;
import android.content.SharedPreferences;
import android.text.TextUtils;
import com.tencent.bugly.crashreport.common.info.a;
import java.io.*;
import java.util.*;

// Referenced classes of package com.tencent.bugly.proguard:
//            ag, v, af

public final class w {

    public static final long a = System.currentTimeMillis();
    private static w b = null;
    private Context c;
    private String d;
    private Map e;
    private SharedPreferences f;

    private w(Context context) {
        c = context;
        e = new HashMap();
        d = com.tencent.bugly.crashreport.common.info.a.a().d;
        f = context.getSharedPreferences("crashrecord", 0);
    }

    public static w a() {
        com/tencent/bugly/proguard/w;
        JVM INSTR monitorenter ;
        w w1 = b;
        com/tencent/bugly/proguard/w;
        JVM INSTR monitorexit ;
        return w1;
        Exception exception;
        exception;
        throw exception;
    }

    public static w a(Context context) {
        com/tencent/bugly/proguard/w;
        JVM INSTR monitorenter ;
        if (b == null) {
            w w1 = JVM INSTR new #2   <Class w>;
            w1.w(context);
            b = w1;
        }
        context = b;
        com/tencent/bugly/proguard/w;
        JVM INSTR monitorexit ;
        return context;
        context;
        throw context;
    }

    static String a(w w1) {
        return w1.d;
    }

    static List a(w w1, int i) {
        return w1.c(i);
    }

    private void a(int i, List list) {
        this;
        JVM INSTR monitorenter ;
        if (list != null) goto _L2; else goto _L1
_L1:
        this;
        JVM INSTR monitorexit ;
        return;
_L2:
        Object obj;
        obj = JVM INSTR new #79  <Class File>;
        File file = c.getDir("crashrecord", 0);
        StringBuilder stringbuilder = JVM INSTR new #85  <Class StringBuilder>;
        stringbuilder.StringBuilder();
        ((File) (obj)).File(file, stringbuilder.append(i).toString());
        ObjectOutputStream objectoutputstream;
        objectoutputstream = JVM INSTR new #99  <Class ObjectOutputStream>;
        FileOutputStream fileoutputstream = JVM INSTR new #101 <Class FileOutputStream>;
        fileoutputstream.FileOutputStream(((File) (obj)));
        objectoutputstream.ObjectOutputStream(fileoutputstream);
        obj = objectoutputstream;
        objectoutputstream.writeObject(list);
        objectoutputstream.close();
          goto _L1
        list;
        ag.e("writeCrashRecord error", new Object[0]);
          goto _L1
        list;
        throw list;
        IOException ioexception;
        ioexception;
        list = null;
_L6:
        obj = list;
        ioexception.printStackTrace();
        obj = list;
        com.tencent.bugly.proguard.ag.a("open record file error", new Object[0]);
        if (list == null) goto _L1; else goto _L3
_L3:
        list.close();
          goto _L1
        list;
        obj = null;
_L5:
        if (obj == null)
            break MISSING_BLOCK_LABEL_154;
        ((ObjectOutputStream) (obj)).close();
        throw list;
        list;
        if (true) goto _L5; else goto _L4
_L4:
        ioexception;
        list = objectoutputstream;
          goto _L6
    }

    static void a(w w1, int i, List list) {
        w1.a(i, list);
    }

    static Map b(w w1) {
        return w1.e;
    }

    private boolean b(int i) {
        this;
        JVM INSTR monitorenter ;
        Object obj = c(i);
        if (obj != null) goto _L2; else goto _L1
_L1:
        boolean flag = false;
_L4:
        this;
        JVM INSTR monitorexit ;
        return flag;
_L2:
        long l;
        ArrayList arraylist;
        ArrayList arraylist1;
        try {
            l = System.currentTimeMillis();
            arraylist = JVM INSTR new #137 <Class ArrayList>;
            arraylist.ArrayList();
            arraylist1 = JVM INSTR new #137 <Class ArrayList>;
            arraylist1.ArrayList();
            Iterator iterator = ((List) (obj)).iterator();
            do {
                if (!iterator.hasNext())
                    break;
                v v1 = (v)iterator.next();
                if (v1.b != null && v1.b.equalsIgnoreCase(d) && v1.d > 0)
                    arraylist.add(v1);
                if (v1.c + 0x5265c00L < l)
                    arraylist1.add(v1);
            } while (true);
            break MISSING_BLOCK_LABEL_160;
        }
        // Misplaced declaration of an exception variable
        catch (Object obj) { }
        ag.e("isFrequentCrash failed", new Object[0]);
        flag = false;
        continue; /* Loop/switch isn't completed */
        Collections.sort(arraylist);
        if (arraylist.size() < 2)
            break MISSING_BLOCK_LABEL_241;
        if (arraylist.size() <= 0 || ((v)arraylist.get(arraylist.size() - 1)).c + 0x5265c00L >= l)
            break MISSING_BLOCK_LABEL_236;
        ((List) (obj)).clear();
        a(i, ((List) (obj)));
        flag = false;
        continue; /* Loop/switch isn't completed */
        flag = true;
        continue; /* Loop/switch isn't completed */
        ((List) (obj)).removeAll(arraylist1);
        a(i, ((List) (obj)));
        flag = false;
        if (true) goto _L4; else goto _L3
_L3:
        Exception exception;
        exception;
        throw exception;
    }

    static boolean b(w w1, int i) {
        return w1.b(i);
    }

    static SharedPreferences c(w w1) {
        return w1.f;
    }

    private List c(int i) {
        this;
        JVM INSTR monitorenter ;
        boolean flag;
        Object obj;
        obj = JVM INSTR new #79  <Class File>;
        File file = c.getDir("crashrecord", 0);
        StringBuilder stringbuilder = JVM INSTR new #85  <Class StringBuilder>;
        stringbuilder.StringBuilder();
        ((File) (obj)).File(file, stringbuilder.append(i).toString());
        flag = ((File) (obj)).exists();
        if (flag) goto _L2; else goto _L1
_L1:
        obj = null;
_L4:
        this;
        JVM INSTR monitorexit ;
        return ((List) (obj));
_L2:
        Object obj1;
        obj1 = JVM INSTR new #209 <Class ObjectInputStream>;
        FileInputStream fileinputstream = JVM INSTR new #211 <Class FileInputStream>;
        fileinputstream.FileInputStream(((File) (obj)));
        ((ObjectInputStream) (obj1)).ObjectInputStream(fileinputstream);
        obj = obj1;
        List list = (List)((ObjectInputStream) (obj1)).readObject();
        ((ObjectInputStream) (obj1)).close();
        obj = list;
        continue; /* Loop/switch isn't completed */
        obj;
        ag.e("readCrashRecord error", new Object[0]);
_L6:
        obj = null;
        if (true) goto _L4; else goto _L3
_L3:
        obj;
        obj = null;
_L11:
        com.tencent.bugly.proguard.ag.a("open record file error", new Object[0]);
        if (obj == null) goto _L6; else goto _L5
_L5:
        ((ObjectInputStream) (obj)).close();
          goto _L6
        obj;
        throw obj;
        obj;
        obj1 = null;
_L10:
        obj = obj1;
        com.tencent.bugly.proguard.ag.a("get object error", new Object[0]);
        if (obj1 == null) goto _L6; else goto _L7
_L7:
        ((ObjectInputStream) (obj1)).close();
          goto _L6
        obj1;
        obj = null;
_L9:
        if (obj == null)
            break MISSING_BLOCK_LABEL_192;
        ((ObjectInputStream) (obj)).close();
        throw obj1;
        obj1;
        continue; /* Loop/switch isn't completed */
        obj1;
        if (true) goto _L9; else goto _L8
_L8:
        obj;
          goto _L10
        IOException ioexception;
        ioexception;
        ioexception = ((IOException) (obj1));
          goto _L11
    }

    public final void a(int i, int j) {
        this;
        JVM INSTR monitorenter ;
        af af1 = com.tencent.bugly.proguard.af.a();
        Runnable runnable = JVM INSTR new #6   <Class w$1>;
        runnable.this. _cls1(i, j);
        af1.a(runnable);
        this;
        JVM INSTR monitorexit ;
        return;
        Exception exception;
        exception;
        throw exception;
    }

    public final boolean a(int i) {
        boolean flag1 = true;
        this;
        JVM INSTR monitorenter ;
        boolean flag = flag1;
        Object obj = f;
        flag = flag1;
        Object obj2 = JVM INSTR new #85  <Class StringBuilder>;
        flag = flag1;
        ((StringBuilder) (obj2)).StringBuilder();
        flag = flag1;
        flag1 = ((SharedPreferences) (obj)).getBoolean(((StringBuilder) (obj2)).append(i).append("_").append(d).toString(), true);
        flag = flag1;
        obj = com.tencent.bugly.proguard.af.a();
        flag = flag1;
        obj2 = JVM INSTR new #8   <Class w$2>;
        flag = flag1;
        ((_cls2) (obj2)).this. _cls2(i);
        flag = flag1;
        ((af) (obj)).a(((Runnable) (obj2)));
        flag = flag1;
_L2:
        this;
        JVM INSTR monitorexit ;
        return flag;
        Object obj1;
        obj1;
        ag.e("canInit error", new Object[0]);
        if (true) goto _L2; else goto _L1
_L1:
        obj1;
        throw obj1;
    }


    // Unreferenced inner class com/tencent/bugly/proguard/w$1

/* anonymous class */
    final class _cls1
        implements Runnable {

        private int a;
        private int b;
        private w c;

        public final void run() {
            if (!TextUtils.isEmpty(com.tencent.bugly.proguard.w.a(c))) goto _L2; else goto _L1
_L1:
            return;
_L2:
            Object obj = com.tencent.bugly.proguard.w.a(c, a);
            if (obj != null)
                break MISSING_BLOCK_LABEL_38;
            obj = JVM INSTR new #44  <Class ArrayList>;
            ((ArrayList) (obj)).ArrayList();
            v v1;
            if (w.b(c).get(Integer.valueOf(a)) == null) {
                HashMap hashmap = JVM INSTR new #62  <Class HashMap>;
                hashmap.HashMap();
                w.b(c).put(Integer.valueOf(a), hashmap);
            }
            if (((Map)w.b(c).get(Integer.valueOf(a))).get(com.tencent.bugly.proguard.w.a(c)) != null)
                break MISSING_BLOCK_LABEL_433;
            v1 = JVM INSTR new #69  <Class v>;
            v1.v();
            v1.a = a;
            v1.g = com.tencent.bugly.proguard.w.a;
            v1.b = com.tencent.bugly.proguard.w.a(c);
            v1.f = com.tencent.bugly.crashreport.common.info.a.a().j;
            com.tencent.bugly.crashreport.common.info.a.a().getClass();
            v1.e = "2.3.1";
            v1.c = System.currentTimeMillis();
            v1.d = b;
            ((Map)w.b(c).get(Integer.valueOf(a))).put(com.tencent.bugly.proguard.w.a(c), v1);
_L6:
            Iterator iterator;
            ArrayList arraylist;
            arraylist = JVM INSTR new #44  <Class ArrayList>;
            arraylist.ArrayList();
            iterator = ((List) (obj)).iterator();
            boolean flag1 = false;
_L5:
            v v2;
            if (!iterator.hasNext())
                break MISSING_BLOCK_LABEL_484;
            v2 = (v)iterator.next();
            boolean flag = flag1;
            if (v2.g != v1.g)
                break MISSING_BLOCK_LABEL_346;
            flag = flag1;
            if (v2.b == null)
                break MISSING_BLOCK_LABEL_346;
            flag = flag1;
            if (!v2.b.equalsIgnoreCase(v1.b))
                break MISSING_BLOCK_LABEL_346;
            flag = true;
            v2.d = v1.d;
            if (v2.e != null && !v2.e.equalsIgnoreCase(v1.e) || v2.f != null && !v2.f.equalsIgnoreCase(v1.f)) goto _L4; else goto _L3
_L3:
            flag1 = flag;
            if (v2.d > 0) goto _L5; else goto _L4
_L4:
            arraylist.add(v2);
            flag1 = flag;
              goto _L5
            obj;
            ag.e("saveCrashRecord failed", new Object[0]);
              goto _L1
            v1 = (v)((Map)w.b(c).get(Integer.valueOf(a))).get(com.tencent.bugly.proguard.w.a(c));
            v1.d = b;
              goto _L6
            ((List) (obj)).removeAll(arraylist);
            if (flag1)
                break MISSING_BLOCK_LABEL_506;
            ((List) (obj)).add(v1);
            com.tencent.bugly.proguard.w.a(c, a, ((List) (obj)));
              goto _L1
        }

             {
                c = w.this;
                a = i;
                b = j;
                super();
            }
    }


    // Unreferenced inner class com/tencent/bugly/proguard/w$2

/* anonymous class */
    final class _cls2
        implements Runnable {

        private int a;
        private w b;

        public final void run() {
            boolean flag = w.b(b, a);
            android.content.SharedPreferences.Editor editor = w.c(b).edit();
            String s = (new StringBuilder()).append(a).append("_").append(com.tencent.bugly.proguard.w.a(b)).toString();
            if (!flag)
                flag = true;
            else
                flag = false;
            editor.putBoolean(s, flag).commit();
        }

             {
                b = w.this;
                a = i;
                super();
            }
    }

}
