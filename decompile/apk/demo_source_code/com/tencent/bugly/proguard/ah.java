// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.kpdus.com/jad.html
// Decompiler options: packimports(3) fieldsfirst nonlb space 

package com.tencent.bugly.proguard;

import android.content.Context;
import android.os.Process;
import android.util.Log;
import com.tencent.bugly.crashreport.common.info.a;
import java.io.*;
import java.lang.reflect.Method;
import java.text.SimpleDateFormat;
import java.util.Date;

// Referenced classes of package com.tencent.bugly.proguard:
//            af, a, ag

public final class ah {
    public static final class a {

        private boolean a;
        private File b;
        private String c;
        private long d;
        private long e;

        static File a(a a1) {
            return a1.b;
        }

        private boolean a() {
            boolean flag = false;
            this;
            JVM INSTR monitorenter ;
            File file = JVM INSTR new #47  <Class File>;
            file.File(c);
            b = file;
            if (!b.exists() || b.delete()) goto _L2; else goto _L1
_L1:
            a = false;
_L3:
            this;
            JVM INSTR monitorexit ;
            return flag;
_L2:
            if (b.createNewFile())
                break MISSING_BLOCK_LABEL_74;
            a = false;
              goto _L3
            Object obj;
            obj;
            a = false;
            flag = true;
              goto _L3
            obj;
            throw obj;
        }

        static long b(a a1) {
            return a1.e;
        }

        static boolean c(a a1) {
            return a1.a();
        }

        static boolean d(a a1) {
            return a1.a;
        }

        public final boolean a(String s) {
            boolean flag1 = false;
            this;
            JVM INSTR monitorenter ;
            boolean flag = a;
            if (flag) goto _L2; else goto _L1
_L1:
            flag = flag1;
_L3:
            this;
            JVM INSTR monitorexit ;
            return flag;
_L2:
            Object obj;
            obj = JVM INSTR new #65  <Class FileOutputStream>;
            ((FileOutputStream) (obj)).FileOutputStream(b, true);
            s = s.getBytes("UTF-8");
            ((FileOutputStream) (obj)).write(s);
            ((FileOutputStream) (obj)).flush();
            ((FileOutputStream) (obj)).close();
            d = d + (long)s.length;
            try {
                ((FileOutputStream) (obj)).close();
            }
            // Misplaced declaration of an exception variable
            catch (String s) { }
            flag = true;
              goto _L3
            s;
            s = null;
_L7:
            a = false;
            flag = flag1;
            if (s == null) goto _L3; else goto _L4
_L4:
            s.close();
            flag = flag1;
              goto _L3
            s;
            flag = flag1;
              goto _L3
            s;
            obj = null;
_L6:
            if (obj == null)
                break MISSING_BLOCK_LABEL_122;
            try {
                ((FileOutputStream) (obj)).close();
            }
            // Misplaced declaration of an exception variable
            catch (Object obj) { }
            throw s;
            s;
            this;
            JVM INSTR monitorexit ;
            throw s;
            s;
            continue; /* Loop/switch isn't completed */
            Exception exception;
            exception;
            obj = s;
            s = exception;
            if (true) goto _L6; else goto _L5
_L5:
            s;
            s = ((String) (obj));
              goto _L7
        }

        public a(String s) {
            e = 30720L;
            if (s != null && !s.equals("")) {
                c = s;
                a = a();
            }
        }
    }


    public static boolean a;
    private static SimpleDateFormat b;
    private static int c;
    private static StringBuilder d;
    private static StringBuilder e;
    private static boolean f;
    private static a g;
    private static String h;
    private static String i;
    private static Context j;
    private static String k;
    private static boolean l;
    private static int m;
    private static Object n;
    private static Object o;
    private static Method p;

    static a a(a a1) {
        g = a1;
        return a1;
    }

    static Object a() {
        return n;
    }

    public static void a(int i1) {
        Object obj = n;
        obj;
        JVM INSTR monitorenter ;
        c = i1;
        if (i1 >= 0) goto _L2; else goto _L1
_L1:
        c = 0;
_L4:
        obj;
        JVM INSTR monitorexit ;
        return;
_L2:
        if (i1 <= 10240) goto _L4; else goto _L3
_L3:
        c = 10240;
          goto _L4
        Exception exception;
        exception;
        throw exception;
    }

    public static void a(Context context) {
        com/tencent/bugly/proguard/ah;
        JVM INSTR monitorenter ;
        if (l || context == null) goto _L2; else goto _L1
_L1:
        boolean flag = a;
        if (flag) goto _L3; else goto _L2
_L2:
        com/tencent/bugly/proguard/ah;
        JVM INSTR monitorexit ;
        return;
_L3:
        try {
            StringBuilder stringbuilder = JVM INSTR new #86  <Class StringBuilder>;
            stringbuilder.StringBuilder(0);
            e = stringbuilder;
            stringbuilder = JVM INSTR new #86  <Class StringBuilder>;
            stringbuilder.StringBuilder(0);
            d = stringbuilder;
            j = context;
            context = com.tencent.bugly.crashreport.common.info.a.a(context);
            h = ((com.tencent.bugly.crashreport.common.info.a) (context)).d;
            context.getClass();
            i = "";
            context = JVM INSTR new #86  <Class StringBuilder>;
            context.StringBuilder();
            k = context.append(j.getFilesDir().getPath()).append("/buglylog_").append(h).append("_").append(i).append(".txt").toString();
            m = Process.myPid();
        }
        // Misplaced declaration of an exception variable
        catch (Context context) { }
        l = true;
        if (true) goto _L2; else goto _L4
_L4:
        context;
        throw context;
    }

    public static void a(String s, String s1, String s2) {
        com/tencent/bugly/proguard/ah;
        JVM INSTR monitorenter ;
        if (!l) goto _L2; else goto _L1
_L1:
        boolean flag = a;
        if (flag) goto _L3; else goto _L2
_L2:
        com/tencent/bugly/proguard/ah;
        JVM INSTR monitorexit ;
        return;
_L3:
        long l1;
        b(s, s1, s2);
        l1 = Process.myTid();
        d.setLength(0);
        String s3 = s2;
        if (s2.length() > 30720)
            s3 = s2.substring(s2.length() - 30720, s2.length() - 1);
        s2 = JVM INSTR new #166 <Class Date>;
        s2.Date();
        if (b == null)
            break MISSING_BLOCK_LABEL_209;
        s2 = b.format(s2);
_L4:
        d.append(s2).append(" ").append(m).append(" ").append(l1).append(" ").append(s).append(" ").append(s1).append(": ").append(s3).append("\001\r\n");
        s3 = d.toString();
        synchronized (n) {
            e.append(s3);
            if (e.length() > c)
                break MISSING_BLOCK_LABEL_217;
        }
          goto _L2
        s1;
        s;
        JVM INSTR monitorexit ;
        throw s1;
        s;
        com/tencent/bugly/proguard/ah;
        JVM INSTR monitorexit ;
        throw s;
        s2 = s2.toString();
          goto _L4
        if (!f) goto _L6; else goto _L5
_L5:
        s;
        JVM INSTR monitorexit ;
          goto _L2
_L6:
        f = true;
        s1 = com.tencent.bugly.proguard.af.a();
        s2 = JVM INSTR new #6   <Class ah$1>;
        s2._cls1(s3);
        s1.a(s2);
        s;
        JVM INSTR monitorexit ;
          goto _L2
    }

    public static void a(String s, String s1, Throwable throwable) {
        if (throwable != null) {
            String s2 = throwable.getMessage();
            Object obj = s2;
            if (s2 == null)
                obj = "";
            obj = (new StringBuilder()).append(((String) (obj))).append('\n');
            if (throwable == null) {
                throwable = "";
            } else {
                StringWriter stringwriter = new StringWriter();
                PrintWriter printwriter = new PrintWriter(stringwriter);
                throwable.printStackTrace(printwriter);
                printwriter.flush();
                throwable = stringwriter.toString();
            }
            a(s, s1, ((StringBuilder) (obj)).append(throwable).toString());
        }
    }

    public static byte[] a(boolean flag) {
        Object obj1 = null;
        if (a) goto _L2; else goto _L1
_L1:
        Object obj = obj1;
_L5:
        return ((byte []) (obj));
_L2:
        Object obj2 = n;
        obj2;
        JVM INSTR monitorenter ;
        if (!flag)
            break MISSING_BLOCK_LABEL_75;
        if (g == null || !a.d(g))
            break MISSING_BLOCK_LABEL_75;
        obj = com.tencent.bugly.proguard.a.a(g);
_L3:
        int i1 = e.length();
        if (i1 != 0 || obj != null)
            break MISSING_BLOCK_LABEL_80;
        obj2;
        JVM INSTR monitorexit ;
        obj = obj1;
        continue; /* Loop/switch isn't completed */
        obj;
        throw obj;
        obj = null;
          goto _L3
        obj = com.tencent.bugly.proguard.a.a(((File) (obj)), e.toString());
        obj2;
        JVM INSTR monitorexit ;
        continue; /* Loop/switch isn't completed */
        Throwable throwable;
        throwable;
        throwable = obj1;
        if (true) goto _L5; else goto _L4
_L4:
    }

    static a b() {
        return g;
    }

    private static boolean b(String s, String s1, String s2) {
        if (p != null) goto _L2; else goto _L1
_L1:
        boolean flag = false;
_L4:
        return flag;
_L2:
        if (o == null) {
            Object obj = com.tencent.bugly.proguard.a.a("com.tencent.bugly.crashreport.crash.jni.NativeCrashHandler", "getInstance", null, null, null);
            o = obj;
            if (obj == null) {
                flag = false;
                continue; /* Loop/switch isn't completed */
            }
        }
        try {
            flag = ((Boolean)p.invoke(o, new Object[] {
                s, s1, s2
            })).booleanValue();
        }
        // Misplaced declaration of an exception variable
        catch (String s) {
            Log.w(com.tencent.bugly.proguard.ag.a, s.getMessage());
            flag = false;
        }
        if (true) goto _L4; else goto _L3
_L3:
    }

    static boolean b(boolean flag) {
        f = false;
        return false;
    }

    static String c() {
        return k;
    }

    static StringBuilder d() {
        return e;
    }

    static  {
        b = null;
        a = true;
        c = 5120;
        n = new Object();
        o = null;
        p = null;
        SimpleDateFormat simpledateformat = JVM INSTR new #54  <Class SimpleDateFormat>;
        simpledateformat.SimpleDateFormat("MM-dd HH:mm:ss");
        b = simpledateformat;
        p = Class.forName("com.tencent.bugly.crashreport.crash.jni.NativeCrashHandler").getDeclaredMethod("appendLogToNative", new Class[] {
            java/lang/String, java/lang/String, java/lang/String
        });
_L2:
        return;
        Throwable throwable;
        throwable;
        if (true) goto _L2; else goto _L1
_L1:
    }

    // Unreferenced inner class com/tencent/bugly/proguard/ah$1

/* anonymous class */
    static final class _cls1
        implements Runnable {

        private String a;

        public final void run() {
            Object obj = com.tencent.bugly.proguard.ah.a();
            obj;
            JVM INSTR monitorenter ;
            if (ah.b() != null) goto _L2; else goto _L1
_L1:
            a a1 = JVM INSTR new #32  <Class ah$a>;
            a1.a(ah.c());
            com.tencent.bugly.proguard.ah.a(a1);
_L6:
            if (!a.d(ah.b())) goto _L4; else goto _L3
_L3:
            ah.b().a(ah.d().toString());
            ah.d().setLength(0);
_L8:
            ah.b(false);
_L7:
            return;
_L2:
            if (com.tencent.bugly.proguard.a.a(ah.b()) != null && com.tencent.bugly.proguard.a.a(ah.b()).length() + (long)ah.d().length() <= a.b(ah.b())) goto _L6; else goto _L5
_L5:
            a.c(ah.b());
              goto _L6
            Object obj1;
            obj1;
              goto _L7
_L4:
            ah.d().setLength(0);
            ah.d().append(a);
              goto _L8
            obj1;
            throw obj1;
              goto _L6
        }

             {
                a = s;
                super();
            }
    }

}
