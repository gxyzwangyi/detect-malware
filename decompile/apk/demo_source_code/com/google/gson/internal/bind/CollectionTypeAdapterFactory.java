// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.kpdus.com/jad.html
// Decompiler options: packimports(3) fieldsfirst nonlb space 

package com.google.gson.internal.bind;

import com.google.gson.b.a;
import com.google.gson.d;
import com.google.gson.internal.b;
import com.google.gson.q;
import com.google.gson.r;
import com.google.gson.stream.JsonToken;
import java.lang.reflect.Type;
import java.util.Collection;
import java.util.Iterator;

// Referenced classes of package com.google.gson.internal.bind:
//            h

public final class CollectionTypeAdapterFactory
    implements r {
    private static final class a extends q {

        private final q a;
        private final com.google.gson.internal.d b;

        public Collection a(com.google.gson.stream.a a1) {
            if (a1.f() == JsonToken.i) {
                a1.j();
                a1 = null;
            } else {
                Collection collection = (Collection)b.a();
                a1.a();
                for (; a1.e(); collection.add(a.b(a1)));
                a1.b();
                a1 = collection;
            }
            return a1;
        }

        public volatile void a(com.google.gson.stream.b b1, Object obj) {
            a(b1, (Collection)obj);
        }

        public void a(com.google.gson.stream.b b1, Collection collection) {
            if (collection == null) {
                b1.f();
            } else {
                b1.b();
                for (Iterator iterator = collection.iterator(); iterator.hasNext(); a.a(b1, collection))
                    collection = ((Collection) (iterator.next()));

                b1.c();
            }
        }

        public Object b(com.google.gson.stream.a a1) {
            return a(a1);
        }

        public a(d d1, Type type, q q1, com.google.gson.internal.d d2) {
            a = new h(d1, q1, type);
            b = d2;
        }
    }


    private final b a;

    public CollectionTypeAdapterFactory(b b1) {
        a = b1;
    }

    public q a(d d1, com.google.gson.b.a a1) {
        Type type = a1.b();
        Class class1 = a1.a();
        if (!java/util/Collection.isAssignableFrom(class1)) {
            d1 = null;
        } else {
            type = com.google.gson.internal..Gson.Types.a(type, class1);
            d1 = new a(d1, type, d1.a(com.google.gson.b.a.a(type)), a.a(a1));
        }
        return d1;
    }
}
