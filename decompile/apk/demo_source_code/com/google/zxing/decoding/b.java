// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.kpdus.com/jad.html
// Decompiler options: packimports(3) fieldsfirst nonlb space 

package com.google.zxing.decoding;

import android.graphics.Bitmap;
import android.os.Bundle;
import android.os.Handler;
import android.os.Looper;
import android.os.Message;
import android.util.Log;
import com.google.zxing.QrCodeScanActivity;
import com.google.zxing.ReaderException;
import com.google.zxing.common.i;
import com.google.zxing.d;
import com.google.zxing.e;
import java.io.ByteArrayOutputStream;
import java.util.Map;

final class b extends Handler {

    private static final String a = com/google/zxing/decoding/b.getSimpleName();
    private final QrCodeScanActivity b;
    private final d c = new d();
    private boolean d;

    b(QrCodeScanActivity qrcodescanactivity, Map map) {
        d = true;
        c.a(map);
        b = qrcodescanactivity;
    }

    private static void a(e e1, Bundle bundle) {
        int ai[] = e1.f();
        int j = e1.g();
        Bitmap bitmap = Bitmap.createBitmap(ai, 0, j, j, e1.h(), android.graphics.Bitmap.Config.ARGB_8888);
        ByteArrayOutputStream bytearrayoutputstream = new ByteArrayOutputStream();
        bitmap.compress(android.graphics.Bitmap.CompressFormat.JPEG, 50, bytearrayoutputstream);
        bundle.putByteArray("barcode_bitmap", bytearrayoutputstream.toByteArray());
        bundle.putFloat("barcode_scaled_factor", (float)j / (float)e1.b());
    }

    private void a(byte abyte0[], int j, int k) {
        long l2;
        Object obj;
        e e1;
        l2 = System.currentTimeMillis();
        obj = null;
        byte abyte1[] = new byte[abyte0.length];
        for (int l = 0; l < k; l++) {
            for (int i1 = 0; i1 < j; i1++)
                abyte1[(i1 * k + k) - l - 1] = abyte0[l * j + i1];

        }

        e1 = b.a().a(abyte1, k, j);
        abyte0 = ((byte []) (obj));
        if (e1 == null)
            break MISSING_BLOCK_LABEL_124;
        abyte0 = new com.google.zxing.b(new i(e1));
        abyte0 = c.a(abyte0);
        c.a();
_L1:
        obj = b.c();
        if (abyte0 != null) {
            long l1 = System.currentTimeMillis();
            Log.d(a, (new StringBuilder()).append("Found barcode in ").append(l1 - l2).append(" ms").toString());
            if (obj != null) {
                abyte0 = Message.obtain(((Handler) (obj)), 0x7f0f0009, abyte0);
                obj = new Bundle();
                a(e1, ((Bundle) (obj)));
                abyte0.setData(((Bundle) (obj)));
                abyte0.sendToTarget();
            }
        } else
        if (obj != null)
            Message.obtain(((Handler) (obj)), 0x7f0f0008).sendToTarget();
        return;
        abyte0;
        c.a();
        abyte0 = ((byte []) (obj));
          goto _L1
        abyte0;
        c.a();
        throw abyte0;
    }

    public void handleMessage(Message message) {
        if (d) goto _L2; else goto _L1
_L1:
        return;
_L2:
        if (message.what == 0x7f0f0007)
            a((byte[])(byte[])message.obj, message.arg1, message.arg2);
        else
        if (message.what == 0x7f0f0015) {
            d = false;
            Looper.myLooper().quit();
        }
        if (true) goto _L1; else goto _L3
_L3:
    }

}
