// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.kpdus.com/jad.html
// Decompiler options: packimports(3) fieldsfirst nonlb space 

package com.google.zxing.camera;

import android.content.Context;
import android.content.res.Resources;
import android.graphics.Point;
import android.graphics.Rect;
import android.hardware.Camera;
import android.os.Handler;
import android.util.Log;
import android.view.SurfaceHolder;
import com.google.zxing.camera.a.a;
import com.google.zxing.e;
import java.io.IOException;

// Referenced classes of package com.google.zxing.camera:
//            b, e, a

public final class d {

    private static final String a = com/google/zxing/camera/d.getSimpleName();
    private final Context b;
    private final b c;
    private Camera d;
    private com.google.zxing.camera.a e;
    private Rect f;
    private Rect g;
    private boolean h;
    private boolean i;
    private int j;
    private int k;
    private int l;
    private final com.google.zxing.camera.e m;

    public d(Context context) {
        j = -1;
        b = context;
        c = new b(context);
        m = new com.google.zxing.camera.e(c);
    }

    private static int a(int i1, int j1, int k1) {
        i1 = (i1 * 5) / 8;
        if (i1 >= j1)
            if (i1 > k1)
                j1 = k1;
            else
                j1 = i1;
        return j1;
    }

    public e a(byte abyte0[], int i1, int j1) {
        Rect rect = f();
        if (rect == null)
            abyte0 = null;
        else
            abyte0 = new e(abyte0, i1, j1, rect.left, rect.top, rect.width(), rect.height(), false);
        return abyte0;
    }

    public void a(int i1, int j1) {
        this;
        JVM INSTR monitorenter ;
        Object obj;
        if (!h)
            break MISSING_BLOCK_LABEL_145;
        obj = c.b();
        int k1 = i1;
        if (i1 > ((Point) (obj)).x)
            k1 = ((Point) (obj)).x;
        i1 = j1;
        if (j1 > ((Point) (obj)).y)
            i1 = ((Point) (obj)).y;
        int l1 = (((Point) (obj)).x - k1) / 2;
        j1 = (((Point) (obj)).y - i1) / 2;
        obj = JVM INSTR new #67  <Class Rect>;
        ((Rect) (obj)).Rect(l1, j1, l1 + k1, j1 + i1);
        f = ((Rect) (obj));
        String s = a;
        obj = JVM INSTR new #104 <Class StringBuilder>;
        ((StringBuilder) (obj)).StringBuilder();
        Log.d(s, ((StringBuilder) (obj)).append("Calculated manual framing rect: ").append(f).toString());
        g = null;
_L1:
        this;
        JVM INSTR monitorexit ;
        return;
        k = i1;
        l = j1;
          goto _L1
        Exception exception;
        exception;
        throw exception;
    }

    public void a(Handler handler, int i1) {
        this;
        JVM INSTR monitorenter ;
        Camera camera = d;
        if (camera == null)
            break MISSING_BLOCK_LABEL_35;
        if (i) {
            m.a(handler, i1);
            camera.setOneShotPreviewCallback(m);
        }
        this;
        JVM INSTR monitorexit ;
        return;
        handler;
        throw handler;
    }

    public void a(SurfaceHolder surfaceholder) {
        this;
        JVM INSTR monitorenter ;
        Object obj = d;
        Camera camera;
        camera = ((Camera) (obj));
        if (obj != null)
            break MISSING_BLOCK_LABEL_59;
        if (j < 0)
            break MISSING_BLOCK_LABEL_47;
        camera = com.google.zxing.camera.a.a.a(j);
_L1:
        if (camera != null)
            break MISSING_BLOCK_LABEL_54;
        surfaceholder = JVM INSTR new #151 <Class IOException>;
        surfaceholder.IOException();
        throw surfaceholder;
        surfaceholder;
        this;
        JVM INSTR monitorexit ;
        throw surfaceholder;
        camera = com.google.zxing.camera.a.a.a();
          goto _L1
        d = camera;
        camera.setPreviewDisplay(surfaceholder);
        if (!h) {
            h = true;
            c.a(camera);
            if (k > 0 && l > 0) {
                a(k, l);
                k = 0;
                l = 0;
            }
        }
        surfaceholder = camera.getParameters();
        if (surfaceholder != null) goto _L3; else goto _L2
_L2:
        surfaceholder = null;
_L4:
        c.a(camera, false);
_L6:
        this;
        JVM INSTR monitorexit ;
        return;
_L3:
        surfaceholder = surfaceholder.flatten();
          goto _L4
        RuntimeException runtimeexception;
        runtimeexception;
        Log.w(a, "Camera rejected parameters. Setting only minimal safe-mode parameters");
        runtimeexception = a;
        StringBuilder stringbuilder = JVM INSTR new #104 <Class StringBuilder>;
        stringbuilder.StringBuilder();
        Log.i(runtimeexception, stringbuilder.append("Resetting to saved camera params: ").append(surfaceholder).toString());
        if (surfaceholder == null) goto _L6; else goto _L5
_L5:
        runtimeexception = camera.getParameters();
        runtimeexception.unflatten(surfaceholder);
        camera.setParameters(runtimeexception);
        c.a(camera, true);
          goto _L6
        surfaceholder;
        Log.w(a, "Camera rejected even safe-mode parameters! No configuration");
          goto _L6
    }

    public boolean a() {
        this;
        JVM INSTR monitorenter ;
        Camera camera = d;
        boolean flag;
        if (camera != null)
            flag = true;
        else
            flag = false;
        this;
        JVM INSTR monitorexit ;
        return flag;
        Exception exception;
        exception;
        throw exception;
    }

    public void b() {
        this;
        JVM INSTR monitorenter ;
        if (d != null) {
            d.release();
            d = null;
            f = null;
            g = null;
        }
        this;
        JVM INSTR monitorexit ;
        return;
        Exception exception;
        exception;
        throw exception;
    }

    public void c() {
        this;
        JVM INSTR monitorenter ;
        Object obj = d;
        if (obj == null)
            break MISSING_BLOCK_LABEL_48;
        if (!i) {
            ((Camera) (obj)).startPreview();
            i = true;
            obj = JVM INSTR new #203 <Class com.google.zxing.camera.a>;
            ((com.google.zxing.camera.a) (obj)).com.google.zxing.camera.a(b, d);
            e = ((com.google.zxing.camera.a) (obj));
        }
        this;
        JVM INSTR monitorexit ;
        return;
        Exception exception;
        exception;
        throw exception;
    }

    public void d() {
        this;
        JVM INSTR monitorenter ;
        if (e != null) {
            e.b();
            e = null;
        }
        if (d != null && i) {
            d.stopPreview();
            m.a(null, 0);
            i = false;
        }
        this;
        JVM INSTR monitorexit ;
        return;
        Exception exception;
        exception;
        throw exception;
    }

    public Rect e() {
        Object obj = null;
        this;
        JVM INSTR monitorenter ;
        if (f != null) goto _L2; else goto _L1
_L1:
        Object obj1 = d;
        if (obj1 != null) goto _L4; else goto _L3
_L3:
        this;
        JVM INSTR monitorexit ;
        return ((Rect) (obj));
_L4:
        obj1 = c.b();
        if (obj1 == null)
            continue; /* Loop/switch isn't completed */
        b.getResources().getDisplayMetrics();
        int k1 = a(((Point) (obj1)).x, 240, 1200);
        int j1 = (((Point) (obj1)).x - k1) / 2;
        int i1 = (((Point) (obj1)).y - k1) / 2;
        obj = JVM INSTR new #67  <Class Rect>;
        ((Rect) (obj)).Rect(j1, i1, j1 + k1, k1 + i1);
        f = ((Rect) (obj));
        obj = a;
        obj1 = JVM INSTR new #104 <Class StringBuilder>;
        ((StringBuilder) (obj1)).StringBuilder();
        Log.d(((String) (obj)), ((StringBuilder) (obj1)).append("Calculated framing rect: ").append(f).toString());
_L2:
        obj = f;
        if (true) goto _L3; else goto _L5
_L5:
        Exception exception;
        exception;
        throw exception;
    }

    public Rect f() {
        Object obj = null;
        this;
        JVM INSTR monitorenter ;
        if (g != null) goto _L2; else goto _L1
_L1:
        Rect rect = e();
        if (rect != null) goto _L4; else goto _L3
_L3:
        rect = obj;
_L6:
        this;
        JVM INSTR monitorexit ;
        return rect;
_L4:
        Rect rect1;
        Point point;
        Point point1;
        rect1 = JVM INSTR new #67  <Class Rect>;
        rect1.Rect(rect);
        point = c.a();
        point1 = c.b();
        rect = obj;
        if (point == null)
            continue; /* Loop/switch isn't completed */
        rect = obj;
        if (point1 == null)
            continue; /* Loop/switch isn't completed */
        rect1.left = (rect1.left * point.y) / point1.x;
        rect1.right = (rect1.right * point.y) / point1.x;
        rect1.top = (rect1.top * point.x) / point1.y;
        rect1.bottom = (rect1.bottom * point.x) / point1.y;
        g = rect1;
_L2:
        rect = g;
        if (true) goto _L6; else goto _L5
_L5:
        Exception exception;
        exception;
        throw exception;
    }

}
