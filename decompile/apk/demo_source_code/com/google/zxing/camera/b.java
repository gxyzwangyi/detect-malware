// Decompiled by Jad v1.5.8g. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.kpdus.com/jad.html
// Decompiler options: packimports(3) fieldsfirst nonlb space 

package com.google.zxing.camera;

import android.content.Context;
import android.content.SharedPreferences;
import android.graphics.Point;
import android.hardware.Camera;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.Display;
import android.view.WindowManager;

// Referenced classes of package com.google.zxing.camera:
//            FrontLightMode, c

final class b {

    private final Context a;
    private Point b;
    private Point c;

    b(Context context) {
        a = context;
    }

    private void a(android.hardware.Camera.Parameters parameters, SharedPreferences sharedpreferences, boolean flag) {
        boolean flag1;
        if (FrontLightMode.a(sharedpreferences) == FrontLightMode.a)
            flag1 = true;
        else
            flag1 = false;
        a(parameters, flag1, flag);
    }

    private void a(android.hardware.Camera.Parameters parameters, boolean flag, boolean flag1) {
        com.google.zxing.camera.c.a(parameters, flag);
        PreferenceManager.getDefaultSharedPreferences(a);
        if (flag1);
    }

    Point a() {
        return c;
    }

    void a(Camera camera) {
        camera = camera.getParameters();
        Object obj = ((WindowManager)a.getSystemService("window")).getDefaultDisplay();
        Point point = new Point();
        ((Display) (obj)).getSize(point);
        b = point;
        Log.i("CameraConfiguration", (new StringBuilder()).append("Screen resolution: ").append(b).toString());
        obj = new Point();
        obj.x = b.x;
        obj.y = b.y;
        if (b.x < b.y) {
            obj.x = b.y;
            obj.y = b.x;
        }
        c = com.google.zxing.camera.c.a(camera, ((Point) (obj)));
        Log.i("CameraConfiguration", (new StringBuilder()).append("Camera resolution: ").append(c).toString());
    }

    void a(Camera camera, boolean flag) {
        Object obj = camera.getParameters();
        if (obj == null) {
            Log.w("CameraConfiguration", "Device error: no camera parameters are available. Proceeding without configuration.");
        } else {
            Log.i("CameraConfiguration", (new StringBuilder()).append("Initial camera parameters: ").append(((android.hardware.Camera.Parameters) (obj)).flatten()).toString());
            if (flag)
                Log.w("CameraConfiguration", "In camera config safe mode -- most settings will not be honored");
            a(((android.hardware.Camera.Parameters) (obj)), PreferenceManager.getDefaultSharedPreferences(a), flag);
            com.google.zxing.camera.c.a(((android.hardware.Camera.Parameters) (obj)), true, true, flag);
            if (flag);
            ((android.hardware.Camera.Parameters) (obj)).setPreviewSize(c.x, c.y);
            camera.setParameters(((android.hardware.Camera.Parameters) (obj)));
            obj = camera.getParameters().getPreviewSize();
            if (obj != null && (c.x != ((android.hardware.Camera.Size) (obj)).width || c.y != ((android.hardware.Camera.Size) (obj)).height)) {
                Log.w("CameraConfiguration", (new StringBuilder()).append("Camera said it supported preview size ").append(c.x).append('x').append(c.y).append(", but after setting it, preview size is ").append(((android.hardware.Camera.Size) (obj)).width).append('x').append(((android.hardware.Camera.Size) (obj)).height).toString());
                c.x = ((android.hardware.Camera.Size) (obj)).width;
                c.y = ((android.hardware.Camera.Size) (obj)).height;
            }
            camera.setDisplayOrientation(90);
        }
    }

    Point b() {
        return b;
    }
}
