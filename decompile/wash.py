

import os
import sys
import re


#清洗阶段-------------------------------------------------------------


useless_code = [ "//", "import", "final", ]


class wash_class:
    def __int__(self,_apk_source_code_folder):
        self._apk_source_code_folder=_apk_source_code_folder
        self.useless_path = [ self._apk_source_code_folder + "/android" ]




    # 遍历源码目录,去除系统包和文件
    def walk_source(self, rootDir ):
        list_dirs_use = [ ]
        list_files_use = [ ]
        list_dirs = os.walk( rootDir )
        for root, dirs, files in list_dirs:
            print root, dirs, files
            if self.is_useless_path( root,self.useless_path ) == 0:
                list_dirs_use.append( (root, dirs, files) )

        for root, dirs, files in list_dirs_use:
            for f in files:
                if not f.startswith( "." ):
                    list_files_use.append( os.path.join( root, f ) )
        #print  list_files_use
        return list_files_use






    # 判断是否为无需扫描文件(如support)
    def is_useless_path( self,path ,useless_path):
        for ul in useless_path:
            if ul in path:
                return 1
        return 0


    # 判断是否为无需扫描代码(如. / import 等 ,)暂未使用
    def is_useless_code( self,line,useless_code ):
        for uc in useless_code:
            # if line.startswith(uc):
            if uc in line:
                return 1
        return 0


    # 判断是否为最终文件夹,暂未使用
    def is_end_dir( self,dirs ):
        list_dirs = os.walk( dirs )
        num = 0
        for root, dirs, files in list_dirs:
            if dirs != [ ]:
                return 1
            num += 1
        if num == 1:
            return 0
        else:
            return 1

    
        
